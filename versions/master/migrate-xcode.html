<!-- /versions/master/foo/bar -> ["master", "foo", "bar"] -->
<!-- /versions/0.12.3/baz.md -> ["0.12.3", "baz.md"] -->





<!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/WebPage">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Only show Bazel version in title if it's a release -->
    <title>Migrating from Xcode to Bazel - Bazel </title>

    <link rel="canonical" href="/versions/master/migrate-xcode.html">

    <!-- Webfont -->
    <link href="//fonts.googleapis.com/css?family=RobotoDraft:300,400,500,700|Source+Code+Pro:400,500,700|Open+Sans" rel="stylesheet">

    <link rel="shortcut icon" type="image/png" href="/images/favicon.ico">

    <!-- Bootstrap -->
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/css/font-awesome.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom stylesheet -->
    <link rel="stylesheet" type="text/css" href="/css/main.css" />

    <!-- metadata -->
    <meta name="og:title" content="Migrating from Xcode to Bazel"/>
    <meta name="og:image" content="/images/bazel-og-image.png"/>

    <!-- google search console verification -->
    <meta name="google-site-verification" content="ftWLOiP2hnDW4Cw3LUGEaXU83RVIpiyxwaXFFhoakzs" />
  </head>

  <body>
        <nav id="common-nav" class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://www.bazel.build/">
            <img class="navbar-logo" src="/images/bazel-navbar.svg">
          </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://github.com/bazelbuild/bazel">GitHub</a></li>
          </ul>
          <form class="navbar-form navbar-right" action="/search.html" id="cse-search-box">
            <div class="form-group">
              <input type="hidden" name="cx" value="009927877080525621790:2pxlpaexqpc">
              <input type="hidden" name="cof" value="FORID:10">
              <input type="hidden" name="ie" value="UTF-8">
              <input type="search" name="q" id="q" class="form-control input-sm" placeholder="Search">
            </div>
          </form>
          <ul class="nav navbar-nav navbar-right">
            <li>
              <a href="/">Documentation</a>
            </li>
            <li>
              <a href="https://www.bazel.build/contributing.html">Contribute</a>
            </li>
            <li>
              <a href="https://blog.bazel.build">Blog</a>
            </li>
            <li><a href="https://twitter.com/bazelbuild" class="nav-icon"><i class="fa fa-twitter"></i></a></li>
            <li><a href="http://stackoverflow.com/questions/tagged/bazel" class="nav-icon"><i class="fa fa-stack-overflow"></i></a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>


    <div class="container vpad">
      <div class="row">
        <div class="col-md-2">
          <a class="btn btn-default btn-lg btn-block sidebar-toggle"
              data-toggle="collapse" href="#sidebar-nav" aria-expanded="false"
              aria-controls="sidebar-nav">
            <i class="glyphicon glyphicon-menu-hamburger"></i> Navigation
          </a>

          <nav class="sidebar collapse" id="sidebar-nav">
            <select onchange="location.href=this.value">
                <option value="" selected disabled hidden>Version: master</option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/master/migrate-xcode.html">
                    master
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/2.1.0/migrate-xcode.html">
                    2.1.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/2.0.0/migrate-xcode.html">
                    2.0.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/1.2.0/migrate-xcode.html">
                    1.2.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/1.1.0/migrate-xcode.html">
                    1.1.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/1.0.0/migrate-xcode.html">
                    1.0.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.29.1/migrate-xcode.html">
                    0.29.1
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.29.0/migrate-xcode.html">
                    0.29.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.28.0/migrate-xcode.html">
                    0.28.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.27.0/migrate-xcode.html">
                    0.27.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.26.0/migrate-xcode.html">
                    0.26.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.25.0/migrate-xcode.html">
                    0.25.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.24.0/migrate-xcode.html">
                    0.24.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.23.0/migrate-xcode.html">
                    0.23.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.22.0/migrate-xcode.html">
                    0.22.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.21.0/migrate-xcode.html">
                    0.21.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.20.0/migrate-xcode.html">
                    0.20.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.19.2/migrate-xcode.html">
                    0.19.2
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.19.1/migrate-xcode.html">
                    0.19.1
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.18.1/migrate-xcode.html">
                    0.18.1
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.17.2/migrate-xcode.html">
                    0.17.2
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.17.1/migrate-xcode.html">
                    0.17.1
                </option>
                
            </select>

            <h4>Home</h4>
            <ul class="sidebar-nav">
              <li><a href="/versions/master/bazel-overview.html">Bazel Overview</a></li>
              <li><a href="/versions/master/bazel-vision.html">Bazel Vision</a></li>
              <li><a href="/versions/master/getting-started.html">Getting Started</a></li>
              <li><a href="/versions/master/backward-compatibility.html">Backward Compatibility</a></li>
            </ul>

            <h4>Installing and Using Bazel</h4>
            <ul class="sidebar-nav">

              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#installing-menu" aria-expanded="false"
                    aria-controls="installing-menu">
                  Installing Bazel<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="installing-menu">
                   <li><a href="/versions/master/install.html">Installation Overview</a></li>
                   <li><a href="/versions/master/install-ubuntu.html">Installing on Ubuntu</a></li>
                   <li><a href="/versions/master/install-redhat.html">Installing on Fedora/CentOS</a></li>
                   <li><a href="/versions/master/install-os-x.html">Installing on macOS</a></li>
                   <li><a href="/versions/master/install-windows.html">Installing on Windows</a></li>
                   <li><a href="/versions/master/install-compile-source.html">Compiling from Source</a></li>
                   <li><a href="/versions/master/completion.html">Command-Line Completion</a></li>
                   <li><a href="/versions/master/ide.html">Integrating with IDEs</a></li>
                </ul>
              </li>

              
              <li class="sidebar-nav">
                <a href="/versions/master/updating-bazel.html">Updating Bazel</a>
              </li>
              

              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#using-menu" aria-expanded="false"
                    aria-controls="using-menu">
                  Using Bazel<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="using-menu">
                  <li><a href="/versions/master/build-ref.html">Bazel Concepts</a></li>
                  <li><a href="/versions/master/guide.html">User's Guide (Bazel commands)</a></li>
                  <li><a href="/versions/master/external.html">External Dependencies</a></li>
                  <li><a href="/versions/master/configurable-attributes.html">Configurable Attributes</a></li>
                  <li><a href="/versions/master/best-practices.html">Best Practices</a></li>
                  <li><a href="/versions/master/memory-saving-mode.html">Memory-saving Mode</a></li>
                  <li><a href="/versions/master/windows.html">Using Bazel on Windows</a></li>
                </ul>
              </li>

              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#build-files-menu" aria-expanded="false"
                    aria-controls="build-files-menu">
                  BUILD files<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="build-files-menu">
                  <li><a href="/versions/master/be/functions.html">Functions</a></li>
                  <li><a href="/versions/master/be/common-definitions.html">Common Definitions</a></li>
                  <li><a href="/versions/master/be/make-variables.html">"Make" Variables</a></li>
                  <li><a href="/versions/master/skylark/tutorial-sharing-variables.html">Sharing Variables</a></li>
                  <li><a href="/versions/master/skylark/tutorial-creating-a-macro.html">Creating a Macro</a></li>
                </ul>
              </li>

              
                <li><a href="/versions/master/rules.html">Rules</a></li>
              

              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#query-menu" aria-expanded="false"
                    aria-controls="query-menu">
                  Queries<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="query-menu">
                  <li><a href="/versions/master/query-how-to.html">Bazel query</a></li>
                  <li><a href="/versions/master/cquery.html">Bazel cquery</a></li>
                  <li><a href="/versions/master/aquery.html">Bazel aquery</a></li>
                  <li><a href="/versions/master/query.html">Query Language</a></li>
                </ul>
              </li>

              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#remote-execution-menu" aria-expanded="false"
                    aria-controls="remote-execution-menu">
                  Remote Execution<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="remote-execution-menu">
                   <li><a href="/versions/master/remote-execution.html">Remote Execution Overview</a></li>
                   <li><a href="/versions/master/remote-execution-rules.html">Guidelines for Remote Execution</a></li>
                   <li>
                      <a class="sidebar-nav-heading" data-toggle="collapse"
                          href="#troubleshoot-remote-execution-menu" aria-expanded="false"
                          aria-controls="troubleshoot-remote-execution-menu">
                        Troubleshooting Remote Execution<span class="caret"></span>
                      </a>
                      <ul class="collapse sidebar-nav sidebar-submenu" id="troubleshoot-remote-execution-menu">
                         <li><a href="/versions/master/remote-execution-sandbox.html">Troubleshooting Remote Execution with Bazel Sandbox</a></li>
                         <li><a href="/versions/master/workspace-log.html">Finding non-hermetic behavior in WORKSPACE rules</a></li>
                         <li><a href="/versions/master/remote-execution-caching-debug.html">Debugging Remote Cache Hit Rate</a></li>
                      </ul>
                  </li>
                   <li><a href="/versions/master/remote-execution-ci.html">Configuring Bazel CI for Remote Execution Rule Testing</a></li>
                 </ul>
              </li>

              <li>
                  <a class="sidebar-nav-heading" data-toggle="collapse"
                      href="#remote-caching-menu" aria-expanded="false"
                      aria-controls="remote-caching-menu">
                    Remote Caching<span class="caret"></span>
                  </a>
                  <ul class="collapse sidebar-nav sidebar-submenu" id="remote-caching-menu">
                     <li><a href="/versions/master/remote-caching.html">Remote Caching Overview</a></li>
                     <li><a href="/versions/master/remote-caching-debug.html">Debugging Remote Cache Hit Rate for Local Execution</a></li>
                  </ul>
              </li>
              
              <li><a href="/versions/master/platforms-intro.html">Building With Platforms</a></li>
              
             </ul>

           

           <h4>Reference</h4>
           <ul class="sidebar-nav">
             <li><a href="/versions/master/user-manual.html">Commands and Options</a></li>
             <li><a href="/versions/master/skylark/build-style.html">BUILD Style Guide</a></li>
             <li><a href="/versions/master/command-line-reference.html">Command Line Reference</a></li>
             <li><a href="/versions/master/test-encyclopedia.html">Writing Tests</a></li>
             <li><a href="/versions/master/build-event-protocol.html">Build Event Protocol</a></li>
             <li><a href="/versions/master/output_directories.html">Output Directory Layout</a></li>
             <li><a href="/versions/master/platforms.html">Platforms</a></li>
             <li><a href="/versions/master/toolchains.html">Toolchains</a></li>
           </ul>

            <h4>Extending Bazel</h4>
           <ul class="sidebar-nav">
              <li><a href="/versions/master/skylark/concepts.html">Extension Overview</a></li>

              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#starlark-concepts" aria-expanded="false"
                    aria-controls="starlark-concepts">
                  Concepts<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="starlark-concepts">
                  <li><a href="/versions/master/skylark/macros.html">Macros</a></li>
                  <li><a href="/versions/master/skylark/rules.html">Rules</a></li>
                  <li><a href="/versions/master/skylark/depsets.html">Depsets</a></li>
                  <li><a href="/versions/master/skylark/aspects.html">Aspects</a></li>
                  <li><a href="/versions/master/skylark/repository_rules.html">Repository Rules</a></li>
                  <li><a href="/versions/master/skylark/config.html">Configurations</a></li>
                  <li><a href="/versions/master/skylark/faq.html">FAQ</a></li>
                </ul>
              </li>

              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#starlark-practices" aria-expanded="false"
                    aria-controls="starlark-practices">
                  Best Practices<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="starlark-practices">
                  <li><a href="/versions/master/skylark/bzl-style.html">.bzl Style Guide</a></li>
                  <li><a href="/versions/master/skylark/testing.html">Testing</a></li>
                  <li><a href="https://skydoc.bazel.build" target="_blank">Documenting Rules</a></li>
                  <li><a href="https://github.com/bazelbuild/buildtools/tree/master/buildifier">Linter</a></li>
                  <li><a href="/versions/master/skylark/performance.html">Optimizing Performance</a></li>
                  <li><a href="/versions/master/skylark/deploying.html">Deploying Rules</a></li>
                  <li><a href="/versions/master/skylark/windows_tips.html">Writing rules on Windows</a></li>
                </ul>
              </li>

              <li><a href="https://github.com/bazelbuild/examples/tree/master/rules">Examples</a></li>
              <li><a href="/versions/master/skylark/lib/skylark-overview.html">API Reference</a></li>
              <li><a href="/versions/master/skylark/language.html">Starlark Language</a></li>
            </ul>
          </nav>
        </div>

        <div class="col-md-7">
          <h1 id="migrating-from-xcode-to-bazel">Migrating from Xcode to Bazel</h1>

<p>This guide describes how to build or test an Xcode project with Bazel. It
describes the differences between Xcode and Bazel, and provides the steps for
converting an Xcode project to a Bazel project.</p>

<h2 id="contents">Contents</h2>

<ul>
  <li><a href="#differences-between-xcode-and-bazel">Differences between Xcode and Bazel</a></li>
  <li><a href="#before-you-begin">Before you begin</a>
    <ul>
      <li><a href="#analyze-project-dependencies">Analyze project dependencies</a></li>
    </ul>
  </li>
  <li><a href="#build-or-test-an-xcode-project-with-bazel">Build or test an Xcode project with Bazel</a>
    <ul>
      <li><a href="#step-1-create-the-workspace-file">Step 1: Create the <code class="highlighter-rouge">WORKSPACE</code> file</a></li>
      <li><a href="#step-2-experimental-integrate-cocoapods-dependencies">Step 2: (Experimental) Integrate CocoaPod dependencies</a></li>
      <li><a href="#step-3-create-a-build-file">Step 3: Create a <code class="highlighter-rouge">BUILD</code> file:</a>
        <ul>
          <li><a href="#step-3a-add-the-application-target">Step 3a: Add the application target</a></li>
          <li><a href="#step-3b-optional-add-the-test-target-s">Step 3b: (Optional) Add the test target(s)</a></li>
          <li><a href="#step-3c-add-the-library-target-s">Step 3c: Add the library target(s)</a></li>
        </ul>
      </li>
      <li><a href="#step-4-optional-granularize-the-build">Step 4: (Optional) Granularize the build</a></li>
      <li><a href="#step-5-run-the-build">Step 5: Run the build</a></li>
      <li><a href="#step-6-generate-the-xcode-project-with-tulsi">Step 6: Generate the Xcode project with Tulsi</a></li>
    </ul>
  </li>
</ul>

<h2 id="differences-between-xcode-and-bazel">Differences between Xcode and Bazel</h2>

<ul>
  <li>
    <p>Bazel requires you to explicitly specify every build target and its
dependencies, plus the corresponding build settings via build rules.</p>
  </li>
  <li>
    <p>Bazel requires all files on which the project depends to be present
within the workspace directory or specified as imports in the <code class="highlighter-rouge">WORKSPACE</code>
file.</p>
  </li>
  <li>
    <p>When building Xcode projects with Bazel, the <code class="highlighter-rouge">BUILD</code> file(s) become the
source of truth. If you work on the project in Xcode, you must generate a
new version of the Xcode project that matches the <code class="highlighter-rouge">BUILD</code> files using
<a href="http://tulsi.bazel.build/">Tulsi</a> whenever you update the <code class="highlighter-rouge">BUILD</code> files. If
you’re not using Xcode, the <code class="highlighter-rouge">bazel build</code> and <code class="highlighter-rouge">bazel test</code> commands provide
build and test capabilities with certain limitations described later in this
guide.</p>
  </li>
  <li>
    <p>Due to differences in build configuration schemas, such as directory layouts
or build flags, Xcode might not be fully aware of the “big picture” of the
build and thus some Xcode features might not work. Namely:</p>

    <ul>
      <li>
        <p>Depending on the targets you select for conversion in Tulsi, Xcode might
not be able to properly index the project source. This affects code
completion and navigation in Xcode, since Xcode won’t be able to see all
of the project’s source code.</p>
      </li>
      <li>
        <p>Static analysis, address sanitizers, and thread sanitizers might not
work, since Bazel does not produce the outputs that Xcode expects for
those features.</p>
      </li>
      <li>
        <p>If you generate an Xcode project with Tulsi and use that project to run
tests from within Xcode, Xcode will run the tests instead of
Bazel. To run tests with Bazel, run the <code class="highlighter-rouge">bazel test</code> command manually.</p>
      </li>
    </ul>
  </li>
</ul>

<h2 id="before-you-begin">Before you begin</h2>

<p>Before you begin, do the following:</p>

<ol>
  <li>
    <p><a href="install.html">Install Bazel</a> if
you have not already done so.</p>
  </li>
  <li>
    <p>If you’re not familiar with Bazel and its concepts, complete the
<a href="tutorial/ios-app.html">iOS app tutorial</a>.
You should understand the Bazel workspace, including the <code class="highlighter-rouge">WORKSPACE</code> and
<code class="highlighter-rouge">BUILD</code> files, as well as the concepts of targets, build rules, and Bazel
packages.</p>
  </li>
  <li>
    <p>Analyze and understand the project’s dependencies.</p>
  </li>
</ol>

<h3 id="analyze-project-dependencies">Analyze project dependencies</h3>

<p>Unlike Xcode, Bazel requires you to explicitly declare all dependencies for
every target in the <code class="highlighter-rouge">BUILD</code> file.</p>

<p>For more information on external dependencies, see
<a href="external.html">Working with external dependencies</a>.</p>

<h2 id="build-or-test-an-xcode-project-with-bazel">Build or test an Xcode project with Bazel</h2>

<p>To build or test an Xcode project with Bazel, do the following:</p>

<ol>
  <li>
    <p><a href="#step-1-create-the-workspace-file">Create the <code class="highlighter-rouge">WORKSPACE</code> file</a></p>
  </li>
  <li>
    <p><a href="#step-2-experimental-integrate-cocoapods-dependencies">(Experimental) Integrate CocoaPods dependencies</a></p>
  </li>
  <li>
    <p><a href="#step-3-create-a-build-file">Create a <code class="highlighter-rouge">BUILD</code> file:</a></p>

    <p>a.  <a href="#step-3a-add-the-application-target">Add the application target</a></p>

    <p>b.  <a href="#step-3b-optional-add-the-test-target-s">(Optional) Add the test target(s)</a></p>

    <p>c.  <a href="#step-3c-add-the-library-target-s">Add the library target(s)</a></p>
  </li>
  <li>
    <p><a href="#step-4-optional-granularize-the-build">(Optional) Granularize the build</a></p>
  </li>
  <li>
    <p><a href="#step-5-run-the-build">Run the build</a></p>
  </li>
  <li>
    <p><a href="#step-6-generate-the-xcode-project-with-tulsi">Generate the Xcode project with Tulsi</a></p>
  </li>
</ol>

<h3 id="step-1-create-the-workspace-file">Step 1: Create the <code class="highlighter-rouge">WORKSPACE</code> file</h3>

<p>Create a <code class="highlighter-rouge">WORKSPACE</code> file in a new directory. This directory becomes the Bazel
workspace root. If the project uses no external dependencies, this file can be
empty. If the project depends on files or packages that are not in one of the
project’s directories, specify these external dependencies in the <code class="highlighter-rouge">WORKSPACE</code>
file.</p>

<p><strong>Note:</strong> Place the project source code within the directory tree containing the
          <code class="highlighter-rouge">WORKSPACE</code> file.</p>

<h3 id="step-2-experimental-integrate-cocoapods-dependencies">Step 2: (Experimental) Integrate CocoaPods dependencies</h3>

<p>To integrate CocoaPods dependencies into the Bazel workspace, you must convert
them into Bazel packages as described in <a href="migrate-cocoapods.html">Converting CocoaPods dependencies</a>.</p>

<p><strong>Note:</strong> CocoaPods conversion is a manual process with many variables.
CocoaPods integration with Bazel has not been fully verified and is not
officially supported.</p>

<h3 id="step-3-create-a-build-file">Step 3: Create a <code class="highlighter-rouge">BUILD</code> file</h3>

<p>Once you have defined the workspace and external dependencies, you need to
create a <code class="highlighter-rouge">BUILD</code> file that tells Bazel how the project is structured. Create
the <code class="highlighter-rouge">BUILD</code> file at the root of the Bazel workspace and configure it to do an
initial build of the project as follows:</p>

<ul>
  <li><a href="#step-3a-add-the-application-target">Step 3a: Add the application target</a></li>
  <li><a href="#step-3b-optional-add-the-test-target-s">Step 3b: (Optional) Add the test target(s)</a></li>
  <li><a href="#step-3c-add-the-library-target-s">Step 3c: Add the library target(s)</a></li>
</ul>

<p><strong>Tip:</strong> To learn more about packages and other Bazel concepts, see
<a href="build-ref.html">Bazel Terminology</a>.</p>

<h4 id="step-3a-add-the-application-target">Step 3a: Add the application target</h4>

<p>Add a <a href="https://github.com/bazelbuild/rules_apple/blob/master/doc/rules-macos.html#macos_application"><code class="highlighter-rouge">macos_application</code></a>
or an <a href="https://github.com/bazelbuild/rules_apple/blob/master/doc/rules-ios.html#ios_application"><code class="highlighter-rouge">ios_application</code></a>
rule target. This target builds a macOS or iOS application bundle, respectively.
In the target, specify the following at the minimum:</p>

<ul>
  <li>
    <p><code class="highlighter-rouge">bundle_id</code> - the bundle ID (reverse-DNS path followed by app name) of the
binary.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">provisioning_profile</code> - provisioning profile from your Apple Developer
account (if building for an iOS device device).</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">families</code> (iOS only) - whether to build the application for iPhone, iPad,
or both.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">infoplists</code> - list of .plist files to merge into the final Info.plist file.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">minimum_os_version</code> - the minimum version of macOS or iOS that the
application supports. This ensures Bazel builds the application with the
correct API levels.</p>
  </li>
</ul>

<h4 id="step-3b-optional-add-the-test-targets">Step 3b: (Optional) Add the test target(s)</h4>

<p>Bazel’s <a href="https://github.com/bazelbuild/rules_apple">Apple build rules</a> support
running library-based unit tests on iOS and macOS, as well as application-based
tests on macOS. For application-based tests on iOS or UI tests on either
platform, Bazel will build the test outputs but the tests must run within Xcode
through a project generated with Tulsi. Add test targets as follows:</p>

<ul>
  <li>
    <p><a href="https://github.com/bazelbuild/rules_apple/blob/master/doc/rules-macos.html#macos_unit_test"><code class="highlighter-rouge">macos_unit_test</code></a>
to run library-based and application-based unit tests on a macOS.</p>
  </li>
  <li>
    <p><a href="https://github.com/bazelbuild/rules_apple/blob/master/doc/rules-ios.html#ios_unit_test"><code class="highlighter-rouge">ios_unit_test</code></a>
to run library-based unit tests on iOS. For tests requiring the iOS
simulator, Bazel will build the test outputs but not run the tests. You must
<a href="#step-5-generate-the-xcode-project-with-tulsi">generate an Xcode project with Tulsi</a>
and run the tests from within Xcode.</p>
  </li>
  <li>
    <p><a href="https://github.com/bazelbuild/rules_apple/blob/master/doc/rules-ios.html#ios_ui_test"><code class="highlighter-rouge">ios_ui_test</code></a>
to build outputs required to run user interface tests in the iOS simulator
using Xcode. You must <a href="#step-5-generate-the-xcode-project-with-tulsi">generate an Xcode project with Tulsi</a>
and run the tests from within Xcode. Bazel cannot natively run UI tests.</p>
  </li>
</ul>

<p>At the minimum, specify a value for the <code class="highlighter-rouge">minimum_os_version</code> attribute. While
other packaging attributes, such as <code class="highlighter-rouge">bundle_identifier</code> and <code class="highlighter-rouge">infoplists</code>,
default to most commonly used values, ensure that those defaults are compatible
with the project and adjust them as necessary. For tests that require the iOS
simulator, also specify the <code class="highlighter-rouge">ios_application</code> target name as the value of the
<code class="highlighter-rouge">test_host</code> attribute.</p>

<h4 id="step-3c-add-the-library-targets">Step 3c: Add the library target(s)</h4>

<p>Add an <a href="be/objective-c.html#objc_library"><code class="highlighter-rouge">objc_library</code></a>
target for each Objective C library and a <a href="https://github.com/bazelbuild/rules_apple/blob/master/doc/rules-swift.html"><code class="highlighter-rouge">swift_library</code></a>
target for each Swift library on which the application and/or tests depend.</p>

<p>Add the library targets as follows:</p>

<ul>
  <li>
    <p>Add the application library targets as dependencies to the application
targets.</p>
  </li>
  <li>
    <p>Add the test library targets as dependencies to the test targets.</p>
  </li>
  <li>
    <p>List the implementation sources in the <code class="highlighter-rouge">srcs</code> attribute.</p>
  </li>
  <li>
    <p>List the headers in the <code class="highlighter-rouge">hdrs</code> attribute.</p>
  </li>
</ul>

<p><strong>Note:</strong> You can use the <a href="be/functions.html#glob"><code class="highlighter-rouge">glob</code></a>
function to include all sources and/or headers of a certain type. Use it
carefully as it might include files you do not want Bazel to build.</p>

<p>For more information on build rules, see <a href="https://github.com/bazelbuild/rules_apple">Apple Rules for Bazel</a>.</p>

<p>At this point, it is a good idea to test the build:</p>

<p><code class="highlighter-rouge">bazel build //:&lt;application_target&gt;</code></p>

<h3 id="step-4-optional-granularize-the-build">Step 4: (Optional) Granularize the build</h3>

<p>If the project is large, or as it grows, consider chunking it into multiple
Bazel packages. This increased granularity provides:</p>

<ul>
  <li>
    <p>Increased incrementality of builds,</p>
  </li>
  <li>
    <p>Increased parallelization of build tasks,</p>
  </li>
  <li>
    <p>Better maintainability for future users,</p>
  </li>
  <li>
    <p>Better control over source code visibility across targets and packages. This
prevents issues such as libraries containing implementation details leaking
into public APIs.</p>
  </li>
</ul>

<p>Tips for granularizing the project:</p>

<ul>
  <li>
    <p>Put each library in its own Bazel package. Start with those requiring the
fewest dependencies and work your way up the dependency tree.</p>
  </li>
  <li>
    <p>As you add <code class="highlighter-rouge">BUILD</code> files and specify targets, add these new targets to the
   <code class="highlighter-rouge">deps</code> attributes of targets that depend on them.</p>
  </li>
  <li>
    <p>The <code class="highlighter-rouge">glob()</code> function does not cross package boundaries, so as the number
of packages grows the files matched by <code class="highlighter-rouge">glob()</code> will shrink.</p>
  </li>
  <li>
    <p>When adding a <code class="highlighter-rouge">BUILD</code> file to a <code class="highlighter-rouge">main</code> directory, also add a <code class="highlighter-rouge">BUILD</code> file to
the corresponding <code class="highlighter-rouge">test</code> directory.</p>
  </li>
  <li>
    <p>Enforce healthy visibility limits across packages.</p>
  </li>
  <li>
    <p>Build the project after each major change to the <code class="highlighter-rouge">BUILD</code> files and fix
build errors as you encounter them.</p>
  </li>
</ul>

<h3 id="step-5-run-the-build">Step 5: Run the build</h3>

<p>Run the fully migrated build to ensure it completes with no errors or warnings.
Run every application and test target individually to more easily find sources
of any errors that occur.</p>

<p>For example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bazel build //:my-target
</code></pre></div></div>

<h3 id="step-6-generate-the-xcode-project-with-tulsi">Step 6: Generate the Xcode project with Tulsi</h3>

<p>When building with Bazel, the <code class="highlighter-rouge">WORKSPACE</code> and <code class="highlighter-rouge">BUILD</code> files become the source
of truth about the build. To make Xcode aware of this, you must generate a
Bazel-compatible Xcode project using <a href="http://tulsi.bazel.build/">Tulsi</a>.</p>

        </div>

        <div class="col-md-3 sticky-sidebar">
            <div class="right-sidebar">
                <ul class="gh-links">
                    <li><a href="https://github.com/bazelbuild/bazel/issues/new?title=Documentation issue: Migrating from Xcode to Bazel&body=Documentation URL: https://docs.bazel.build/versions/master/migrate-xcode.html&labels=type: documentation"><i class="fa fa-github"></i> Create issue for this page</a></li>
                    <li id="gh-edit-list-item" class="default-hidden" aria-hidden="true"><a id="gh-edit" class="gh-edit default-hidden"><i class="fa fa-pencil" aria-hidden="true"></i> Edit this page</a></li>
                </ul>
                <script>
                 var versionDocsURLRegex = /\/versions\/[\w\.]+\/(.*)/;
                 var ghDocsBazeURL = 'https://github.com/bazelbuild/bazel/tree/master/site/docs/';
                 var editButton = document.getElementById('gh-edit');
                 var editButtonListItem = document.getElementById('gh-edit-list-item');
                 // if there is an edit button and we are not in the Build Encyclopedia
                 // or other generated files.
                 if (editButton
                     && window.location.pathname.match(versionDocsURLRegex)
                     && window.location.pathname.lastIndexOf('/be/') == -1
                     && window.location.pathname.lastIndexOf('/repo/') == -1
                     && window.location.pathname.lastIndexOf('/skylark/lib/') == -1) {
                     var docFile = window.location.pathname.match(versionDocsURLRegex)[1];
                     // some pages are not using markdown :(
                     if (docFile !== 'user-manual.html'
                         && docFile !== 'build-ref.html'
                         && docFile !== 'query.html'
                         && docFile !== 'test-encyclopedia.html') {
                         docFile = docFile.replace('html', 'md');
                     }
                     editButton.href = ghDocsBazeURL + docFile;
                     editButton.style.visibility = 'visible'
                     editButtonListItem.style.visibility = 'visible'
                 }
                </script>

                <ul class="page-toc">
<li class="toc-entry toc-h2"><a href="#contents">Contents</a></li>
<li class="toc-entry toc-h2"><a href="#differences-between-xcode-and-bazel">Differences between Xcode and Bazel</a></li>
<li class="toc-entry toc-h2"><a href="#before-you-begin">Before you begin</a>
<ul class="page-toc-sublist">
<li class="toc-entry toc-h3"><a href="#analyze-project-dependencies">Analyze project dependencies</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#build-or-test-an-xcode-project-with-bazel">Build or test an Xcode project with Bazel</a>
<ul class="page-toc-sublist">
<li class="toc-entry toc-h3"><a href="#step-1-create-the-workspace-file">Step 1: Create the WORKSPACE file</a></li>
<li class="toc-entry toc-h3"><a href="#step-2-experimental-integrate-cocoapods-dependencies">Step 2: (Experimental) Integrate CocoaPods dependencies</a></li>
<li class="toc-entry toc-h3"><a href="#step-3-create-a-build-file">Step 3: Create a BUILD file</a></li>
<li class="toc-entry toc-h3"><a href="#step-4-optional-granularize-the-build">Step 4: (Optional) Granularize the build</a></li>
<li class="toc-entry toc-h3"><a href="#step-5-run-the-build">Step 5: Run the build</a></li>
<li class="toc-entry toc-h3"><a href="#step-6-generate-the-xcode-project-with-tulsi">Step 6: Generate the Xcode project with Tulsi</a></li>
</ul>
</li>
</ul>
            </div>
        </div>
      </div>
    </div>

    <!-- Satisfaction Survey -->
    <script async="" defer="" src="//www.google.com/insights/consumersurveys/async_survey?site=hihwpyy5e5kllsq62elzjrcgn4"></script>

        <footer class="footer">
      <div class="container">
  <div class="row">
    <div class="col-sm-4 col-md-2">
      <p>About</p>
      <ul class="list-unstyled">
        <li><a href="https://github.com/bazelbuild/bazel/wiki/Bazel-Users">Who's Using Bazel?</a></li>
        <li><a href="https://www.bazel.build/roadmap.html">Roadmap</a></li>
        <li><a href="https://www.bazel.build/contributing.html">Contribute</a></li>
        <li><a href="https://www.bazel.build/governance.html">Governance Plan</a></li>
        <li><a href="https://policies.google.com/privacy">Privacy Policy</a></li>
      </ul>
    </div>
    <div class="col-sm-4 col-md-2">
      <p>Support</p>
      <ul class="list-unstyled">
        <li><a href="http://stackoverflow.com/questions/tagged/bazel">Stack Overflow</a></li>
        <li><a href="https://github.com/bazelbuild/bazel/issues">Issue Tracker</a></li>
        <li><a href="/">Documentation</a></li>
        <li><a href="https://www.bazel.build/faq.html">FAQ</a></li>
        <li><a href="https://www.bazel.build/support.html">Support Policy</a></li>
      </ul>
    </div>
    <div class="col-sm-4 col-md-2">
      <p>Stay Connected</p>
      <ul class="list-unstyled">
        <li><a href="https://twitter.com/bazelbuild">Twitter</a></li>
        <li><a href="https://blog.bazel.build">Blog</a></li>
        <li><a href="https://github.com/bazelbuild/bazel">GitHub</a></li>
        <li><a href="https://groups.google.com/forum/#!forum/bazel-discuss">Discussion group</a></li>
      </ul>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12">
      <p class="text-muted">&copy; 2020 Google</p>
    </div>
  </div>
</div>

    </footer>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/assets/js/bootstrap.min.js"></script>

    <!-- Anchor JS -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.2.0/anchor.min.js"></script>
    <script>
      // Automatically add anchors and links to all header elements that don't already have them.
      anchors.add();
    </script>

    <script>
      var shiftWindow = function() {
        if (location.hash.length !== 0) {
          window.scrollBy(0, -50);
        }
      };
      window.addEventListener("hashchange", shiftWindow);

      var highlightCurrentSidebarNav = function() {
        var href = location.pathname;
        var item = $('#sidebar-nav [href$="' + href + '"]');
        if (item) {
          var li = item.parent();
          li.addClass("active");

          if (li.parent() && li.parent().is("ul")) {
            do {
              var ul = li.parent();
              if (ul.hasClass("collapse")) {
                ul.collapse("show");
              }
              li = ul.parent();
            } while (li && li.is("li"));
          }
        }
      };

      $(document).ready(function() {
        // Scroll to anchor of location hash, adjusted for fixed navbar.
        window.setTimeout(function() {
          shiftWindow();
        }, 1);

        // Flip the caret when submenu toggles are clicked.
        $(".sidebar-submenu").on("show.bs.collapse", function() {
          var toggle = $('[href$="#' + $(this).attr('id') + '"]');
          if (toggle) {
            toggle.addClass("dropup");
          }
        });
        $(".sidebar-submenu").on("hide.bs.collapse", function() {
          var toggle = $('[href$="#' + $(this).attr('id') + '"]');
          if (toggle) {
            toggle.removeClass("dropup");
          }
        });

        // Highlight the current page on the sidebar nav.
        highlightCurrentSidebarNav();
      });
    </script>

    <!-- Google Analytics tracking code -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-61082125-1', 'auto');
      ga('send', 'pageview');
    </script>

  </body>
</html>

