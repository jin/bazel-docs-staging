<!-- /versions/master/foo/bar -> ["master", "foo", "bar"] -->
<!-- /versions/0.12.3/baz.md -> ["0.12.3", "baz.md"] -->





<!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/WebPage">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Only show Bazel version in title if it's a release -->
    <title>Toolchains - Bazel </title>

    <link rel="canonical" href="/versions/master/toolchains.html">

    <!-- Webfont -->
    <link href="//fonts.googleapis.com/css?family=RobotoDraft:300,400,500,700|Source+Code+Pro:400,500,700|Open+Sans" rel="stylesheet">

    <link rel="shortcut icon" type="image/png" href="/images/favicon.ico">

    <!-- Bootstrap -->
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/css/font-awesome.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom stylesheet -->
    <link rel="stylesheet" type="text/css" href="/css/main.css" />

    <!-- metadata -->
    <meta name="og:title" content="Toolchains"/>
    <meta name="og:image" content="/images/bazel-og-image.png"/>

    <!-- google search console verification -->
    <meta name="google-site-verification" content="ftWLOiP2hnDW4Cw3LUGEaXU83RVIpiyxwaXFFhoakzs" />
  </head>

  <body>
        <nav id="common-nav" class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://www.bazel.build/">
            <img class="navbar-logo" src="/images/bazel-navbar.svg">
          </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://github.com/bazelbuild/bazel">GitHub</a></li>
          </ul>
          <form class="navbar-form navbar-right" action="/search.html" id="cse-search-box">
            <div class="form-group">
              <input type="hidden" name="cx" value="009927877080525621790:2pxlpaexqpc">
              <input type="hidden" name="cof" value="FORID:10">
              <input type="hidden" name="ie" value="UTF-8">
              <input type="search" name="q" id="q" class="form-control input-sm" placeholder="Search">
            </div>
          </form>
          <ul class="nav navbar-nav navbar-right">
            <li>
              <a href="/">Documentation</a>
            </li>
            <li>
              <a href="https://www.bazel.build/contributing.html">Contribute</a>
            </li>
            <li>
              <a href="https://blog.bazel.build">Blog</a>
            </li>
            <li><a href="https://twitter.com/bazelbuild" class="nav-icon"><i class="fa fa-twitter"></i></a></li>
            <li><a href="http://stackoverflow.com/questions/tagged/bazel" class="nav-icon"><i class="fa fa-stack-overflow"></i></a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>


    <div class="container vpad">
      <div class="row">
        <div class="col-md-2">
          <a class="btn btn-default btn-lg btn-block sidebar-toggle"
              data-toggle="collapse" href="#sidebar-nav" aria-expanded="false"
              aria-controls="sidebar-nav">
            <i class="glyphicon glyphicon-menu-hamburger"></i> Navigation
          </a>

          <nav class="sidebar collapse" id="sidebar-nav">
            <select onchange="location.href=this.value">
                <option value="" selected disabled hidden>Version: master</option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/master/toolchains.html">
                    master
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/2.1.0/toolchains.html">
                    2.1.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/2.0.0/toolchains.html">
                    2.0.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/1.2.0/toolchains.html">
                    1.2.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/1.1.0/toolchains.html">
                    1.1.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/1.0.0/toolchains.html">
                    1.0.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.29.1/toolchains.html">
                    0.29.1
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.29.0/toolchains.html">
                    0.29.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.28.0/toolchains.html">
                    0.28.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.27.0/toolchains.html">
                    0.27.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.26.0/toolchains.html">
                    0.26.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.25.0/toolchains.html">
                    0.25.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.24.0/toolchains.html">
                    0.24.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.23.0/toolchains.html">
                    0.23.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.22.0/toolchains.html">
                    0.22.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.21.0/toolchains.html">
                    0.21.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.20.0/toolchains.html">
                    0.20.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.19.2/toolchains.html">
                    0.19.2
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.19.1/toolchains.html">
                    0.19.1
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.18.1/toolchains.html">
                    0.18.1
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.17.2/toolchains.html">
                    0.17.2
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.17.1/toolchains.html">
                    0.17.1
                </option>
                
            </select>

            <h4>Home</h4>
            <ul class="sidebar-nav">
              <li><a href="/versions/master/bazel-overview.html">Bazel Overview</a></li>
              <li><a href="/versions/master/bazel-vision.html">Bazel Vision</a></li>
              <li><a href="/versions/master/getting-started.html">Getting Started</a></li>
              <li><a href="/versions/master/backward-compatibility.html">Backward Compatibility</a></li>
            </ul>

            <h4>Installing and Using Bazel</h4>
            <ul class="sidebar-nav">

              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#installing-menu" aria-expanded="false"
                    aria-controls="installing-menu">
                  Installing Bazel<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="installing-menu">
                   <li><a href="/versions/master/install.html">Installation Overview</a></li>
                   <li><a href="/versions/master/install-ubuntu.html">Installing on Ubuntu</a></li>
                   <li><a href="/versions/master/install-redhat.html">Installing on Fedora/CentOS</a></li>
                   <li><a href="/versions/master/install-os-x.html">Installing on macOS</a></li>
                   <li><a href="/versions/master/install-windows.html">Installing on Windows</a></li>
                   <li><a href="/versions/master/install-compile-source.html">Compiling from Source</a></li>
                   <li><a href="/versions/master/completion.html">Command-Line Completion</a></li>
                   <li><a href="/versions/master/ide.html">Integrating with IDEs</a></li>
                </ul>
              </li>

              
              <li class="sidebar-nav">
                <a href="/versions/master/updating-bazel.html">Updating Bazel</a>
              </li>
              

              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#using-menu" aria-expanded="false"
                    aria-controls="using-menu">
                  Using Bazel<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="using-menu">
                  <li><a href="/versions/master/build-ref.html">Bazel Concepts</a></li>
                  <li><a href="/versions/master/guide.html">User's Guide (Bazel commands)</a></li>
                  <li><a href="/versions/master/external.html">External Dependencies</a></li>
                  <li><a href="/versions/master/configurable-attributes.html">Configurable Attributes</a></li>
                  <li><a href="/versions/master/best-practices.html">Best Practices</a></li>
                  <li><a href="/versions/master/memory-saving-mode.html">Memory-saving Mode</a></li>
                  <li><a href="/versions/master/windows.html">Using Bazel on Windows</a></li>
                </ul>
              </li>

              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#build-files-menu" aria-expanded="false"
                    aria-controls="build-files-menu">
                  BUILD files<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="build-files-menu">
                  <li><a href="/versions/master/be/functions.html">Functions</a></li>
                  <li><a href="/versions/master/be/common-definitions.html">Common Definitions</a></li>
                  <li><a href="/versions/master/be/make-variables.html">"Make" Variables</a></li>
                  <li><a href="/versions/master/skylark/tutorial-sharing-variables.html">Sharing Variables</a></li>
                  <li><a href="/versions/master/skylark/tutorial-creating-a-macro.html">Creating a Macro</a></li>
                </ul>
              </li>

              
                <li><a href="/versions/master/rules.html">Rules</a></li>
              

              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#query-menu" aria-expanded="false"
                    aria-controls="query-menu">
                  Queries<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="query-menu">
                  <li><a href="/versions/master/query-how-to.html">Bazel query</a></li>
                  <li><a href="/versions/master/cquery.html">Bazel cquery</a></li>
                  <li><a href="/versions/master/aquery.html">Bazel aquery</a></li>
                  <li><a href="/versions/master/query.html">Query Language</a></li>
                </ul>
              </li>

              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#remote-execution-menu" aria-expanded="false"
                    aria-controls="remote-execution-menu">
                  Remote Execution<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="remote-execution-menu">
                   <li><a href="/versions/master/remote-execution.html">Remote Execution Overview</a></li>
                   <li><a href="/versions/master/remote-execution-rules.html">Guidelines for Remote Execution</a></li>
                   <li>
                      <a class="sidebar-nav-heading" data-toggle="collapse"
                          href="#troubleshoot-remote-execution-menu" aria-expanded="false"
                          aria-controls="troubleshoot-remote-execution-menu">
                        Troubleshooting Remote Execution<span class="caret"></span>
                      </a>
                      <ul class="collapse sidebar-nav sidebar-submenu" id="troubleshoot-remote-execution-menu">
                         <li><a href="/versions/master/remote-execution-sandbox.html">Troubleshooting Remote Execution with Bazel Sandbox</a></li>
                         <li><a href="/versions/master/workspace-log.html">Finding non-hermetic behavior in WORKSPACE rules</a></li>
                         <li><a href="/versions/master/remote-execution-caching-debug.html">Debugging Remote Cache Hit Rate</a></li>
                      </ul>
                  </li>
                   <li><a href="/versions/master/remote-execution-ci.html">Configuring Bazel CI for Remote Execution Rule Testing</a></li>
                 </ul>
              </li>

              <li>
                  <a class="sidebar-nav-heading" data-toggle="collapse"
                      href="#remote-caching-menu" aria-expanded="false"
                      aria-controls="remote-caching-menu">
                    Remote Caching<span class="caret"></span>
                  </a>
                  <ul class="collapse sidebar-nav sidebar-submenu" id="remote-caching-menu">
                     <li><a href="/versions/master/remote-caching.html">Remote Caching Overview</a></li>
                     <li><a href="/versions/master/remote-caching-debug.html">Debugging Remote Cache Hit Rate for Local Execution</a></li>
                  </ul>
              </li>
              
              <li><a href="/versions/master/platforms-intro.html">Building With Platforms</a></li>
              
             </ul>

           

           <h4>Reference</h4>
           <ul class="sidebar-nav">
             <li><a href="/versions/master/user-manual.html">Commands and Options</a></li>
             <li><a href="/versions/master/skylark/build-style.html">BUILD Style Guide</a></li>
             <li><a href="/versions/master/command-line-reference.html">Command Line Reference</a></li>
             <li><a href="/versions/master/test-encyclopedia.html">Writing Tests</a></li>
             <li><a href="/versions/master/build-event-protocol.html">Build Event Protocol</a></li>
             <li><a href="/versions/master/output_directories.html">Output Directory Layout</a></li>
             <li><a href="/versions/master/platforms.html">Platforms</a></li>
             <li><a href="/versions/master/toolchains.html">Toolchains</a></li>
           </ul>

            <h4>Extending Bazel</h4>
           <ul class="sidebar-nav">
              <li><a href="/versions/master/skylark/concepts.html">Extension Overview</a></li>

              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#starlark-concepts" aria-expanded="false"
                    aria-controls="starlark-concepts">
                  Concepts<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="starlark-concepts">
                  <li><a href="/versions/master/skylark/macros.html">Macros</a></li>
                  <li><a href="/versions/master/skylark/rules.html">Rules</a></li>
                  <li><a href="/versions/master/skylark/depsets.html">Depsets</a></li>
                  <li><a href="/versions/master/skylark/aspects.html">Aspects</a></li>
                  <li><a href="/versions/master/skylark/repository_rules.html">Repository Rules</a></li>
                  <li><a href="/versions/master/skylark/config.html">Configurations</a></li>
                  <li><a href="/versions/master/skylark/faq.html">FAQ</a></li>
                </ul>
              </li>

              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#starlark-practices" aria-expanded="false"
                    aria-controls="starlark-practices">
                  Best Practices<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="starlark-practices">
                  <li><a href="/versions/master/skylark/bzl-style.html">.bzl Style Guide</a></li>
                  <li><a href="/versions/master/skylark/testing.html">Testing</a></li>
                  <li><a href="https://skydoc.bazel.build" target="_blank">Documenting Rules</a></li>
                  <li><a href="https://github.com/bazelbuild/buildtools/tree/master/buildifier">Linter</a></li>
                  <li><a href="/versions/master/skylark/performance.html">Optimizing Performance</a></li>
                  <li><a href="/versions/master/skylark/deploying.html">Deploying Rules</a></li>
                  <li><a href="/versions/master/skylark/windows_tips.html">Writing rules on Windows</a></li>
                </ul>
              </li>

              <li><a href="https://github.com/bazelbuild/examples/tree/master/rules">Examples</a></li>
              <li><a href="/versions/master/skylark/lib/skylark-overview.html">API Reference</a></li>
              <li><a href="/versions/master/skylark/language.html">Starlark Language</a></li>
            </ul>
          </nav>
        </div>

        <div class="col-md-8 content">
          <h1 id="toolchains">Toolchains</h1>

<ul>
  <li><a href="#overview">Overview</a></li>
  <li><a href="#motivation">Motivation</a></li>
  <li><a href="#writing-rules-that-use-toolchains">Writing rules that use toolchains</a></li>
  <li><a href="#defining-toolchains">Defining toolchains</a></li>
  <li><a href="#registering-and-building-with-toolchains">Registering and building with toolchains</a></li>
  <li><a href="#toolchain-resolution">Toolchain resolution</a></li>
  <li><a href="#debugging-toolchains">Debugging toolchains</a></li>
</ul>

<h2 id="overview">Overview</h2>

<p>This page describes the toolchain framework – a way for rule authors to
decouple their rule logic from platform-based selection of tools. It is
recommended to read the
<a href="skylark/rules.html">rules</a>
and
<a href="platforms.html">platforms</a>
pages before continuing. This page covers why toolchains are needed, how to
define and use them, and how Bazel selects an appropriate toolchain based on
platform constraints.</p>

<h2 id="motivation">Motivation</h2>

<p>Let’s first look at the problem toolchains are designed to solve. Suppose you
were writing rules to support the “bar” programming language. Your <code class="highlighter-rouge">bar_binary</code>
rule would compile <code class="highlighter-rouge">*.bar</code> files using the <code class="highlighter-rouge">barc</code> compiler, a tool that itself
is built as another target in your workspace. Since users who write <code class="highlighter-rouge">bar_binary</code>
targets shouldn’t have to specify a dependency on the compiler, you make it an
implicit dependency by adding it to the rule definition as a private attribute.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">bar_binary</span> <span class="o">=</span> <span class="n">rule</span><span class="p">(</span>
    <span class="n">implementation</span> <span class="o">=</span> <span class="n">_bar_binary_impl</span><span class="p">,</span>
    <span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">"srcs"</span><span class="p">:</span> <span class="n">attr</span><span class="o">.</span><span class="n">label_list</span><span class="p">(</span><span class="n">allow_files</span> <span class="o">=</span> <span class="bp">True</span><span class="p">),</span>
        <span class="o">...</span>
        <span class="s">"_compiler"</span><span class="p">:</span> <span class="n">attr</span><span class="o">.</span><span class="n">label</span><span class="p">(</span>
            <span class="n">default</span> <span class="o">=</span> <span class="s">"//bar_tools:barc_linux"</span><span class="p">,</span>  <span class="c1"># the compiler running on linux
</span>            <span class="n">providers</span> <span class="o">=</span> <span class="p">[</span><span class="n">BarcInfo</span><span class="p">],</span>
        <span class="p">),</span>
    <span class="p">},</span>
<span class="p">)</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">//bar_tools:barc_linux</code> is now a dependency of every <code class="highlighter-rouge">bar_binary</code> target, so
it’ll be built before any <code class="highlighter-rouge">bar_binary</code> target. It can be accessed by the rule’s
implementation function just like any other attribute:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">BarcInfo</span> <span class="o">=</span> <span class="n">provider</span><span class="p">(</span>
    <span class="n">doc</span> <span class="o">=</span> <span class="s">"Information about how to invoke the barc compiler."</span><span class="p">,</span>
    <span class="c1"># In the real world, compiler_path and system_lib might hold File objects,
</span>    <span class="c1"># but for simplicity we'll make them strings instead. arch_flags is a list
</span>    <span class="c1"># of strings.
</span>    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">"compiler_path"</span><span class="p">,</span> <span class="s">"system_lib"</span><span class="p">,</span> <span class="s">"arch_flags"</span><span class="p">],</span>
<span class="p">)</span>

<span class="k">def</span> <span class="nf">_bar_binary_impl</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">attr</span><span class="o">.</span><span class="n">_compiler</span><span class="p">[</span><span class="n">BarcInfo</span><span class="p">]</span>
    <span class="n">command</span> <span class="o">=</span> <span class="s">"</span><span class="si">%</span><span class="s">s -l </span><span class="si">%</span><span class="s">s </span><span class="si">%</span><span class="s">s"</span> <span class="o">%</span> <span class="p">(</span>
        <span class="n">info</span><span class="o">.</span><span class="n">compiler_path</span><span class="p">,</span>
        <span class="n">info</span><span class="o">.</span><span class="n">system_lib</span><span class="p">,</span>
        <span class="s">" "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">arch_flags</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="o">...</span>
</code></pre></div></div>

<p>The issue here is that the compiler’s label is hardcoded into <code class="highlighter-rouge">bar_binary</code>, yet
different targets may need different compilers depending on what platform they
are being built for and what platform they are being built on – called the
<em>target platform</em> and <em>execution platform</em>, respectively. Furthermore, the rule
author does not necessarily even know all the available tools and platforms, so
it is not feasible to hardcode them in the rule’s definition.</p>

<p>A less-than-ideal solution would be to shift the burden onto users, by making
the <code class="highlighter-rouge">_compiler</code> attribute non-private. Then individual targets could be
hardcoded to build for one platform or another.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">bar_binary</span><span class="p">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s">"myprog_on_linux"</span><span class="p">,</span>
    <span class="n">srcs</span> <span class="o">=</span> <span class="p">[</span><span class="s">"mysrc.bar"</span><span class="p">],</span>
    <span class="n">compiler</span> <span class="o">=</span> <span class="s">"//bar_tools:barc_linux"</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">bar_binary</span><span class="p">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s">"myprog_on_windows"</span><span class="p">,</span>
    <span class="n">srcs</span> <span class="o">=</span> <span class="p">[</span><span class="s">"mysrc.bar"</span><span class="p">],</span>
    <span class="n">compiler</span> <span class="o">=</span> <span class="s">"//bar_tools:barc_windows"</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div></div>

<p>We can improve on this solution by using <code class="highlighter-rouge">select</code> to choose the <code class="highlighter-rouge">compiler</code>
<a href="configurable-attributes.html">based on the platform</a>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">config_setting</span><span class="p">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s">"on_linux"</span><span class="p">,</span>
    <span class="n">constraint_values</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">"@platforms//os:linux"</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">)</span>

<span class="n">config_setting</span><span class="p">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s">"on_windows"</span><span class="p">,</span>
    <span class="n">constraint_values</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">"@platforms//os:windows"</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">)</span>

<span class="n">bar_binary</span><span class="p">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s">"myprog"</span><span class="p">,</span>
    <span class="n">srcs</span> <span class="o">=</span> <span class="p">[</span><span class="s">"mysrc.bar"</span><span class="p">],</span>
    <span class="n">compiler</span> <span class="o">=</span> <span class="n">select</span><span class="p">({</span>
        <span class="s">":on_linux"</span><span class="p">:</span> <span class="s">"//bar_tools:barc_linux"</span><span class="p">,</span>
        <span class="s">":on_windows"</span><span class="p">:</span> <span class="s">"//bar_tools:barc_windows"</span><span class="p">,</span>
    <span class="p">}),</span>
<span class="p">)</span>
</code></pre></div></div>

<p>But this is tedious and a bit much to ask of every single <code class="highlighter-rouge">bar_binary</code> user.
If this style is not used consistently throughout the workspace, it leads to
builds that work fine on a single platform but fail when extended to
multi-platform scenarios. It also does not address the problem of adding support
for new platforms and compilers without modifying existing rules or targets.</p>

<p>The toolchain framework solves this problem by adding an extra level of
indirection. Essentially, you declare that your rule has an abstract dependency
on <em>some</em> member of a family of targets (a toolchain type), and Bazel
automatically resolves this to a particular target (a toolchain) based on the
applicable platform constraints. Neither the rule author nor the target author
need know the complete set of available platforms and toolchains.</p>

<h2 id="writing-rules-that-use-toolchains">Writing rules that use toolchains</h2>

<p>Under the toolchain framework, instead of having rules depend directly on tools,
they instead depend on <em>toolchain types</em>. A toolchain type is a simple target
that represents a class of tools that serve the same role for different
platforms. For instance, we can declare a type that represents the bar compiler:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># By convention, toolchain_type targets are named "toolchain_type" and
# distinguished by their package path. So the full path for this would be
# //bar_tools:toolchain_type.
</span><span class="n">toolchain_type</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"toolchain_type"</span><span class="p">)</span>
</code></pre></div></div>

<p>The rule definition in the previous section is modified so that instead of
taking in the compiler as an attribute, it declares that it consumes a
<code class="highlighter-rouge">//bar_tools:toolchain_type</code> toolchain.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">bar_binary</span> <span class="o">=</span> <span class="n">rule</span><span class="p">(</span>
    <span class="n">implementation</span> <span class="o">=</span> <span class="n">_bar_binary_impl</span><span class="p">,</span>
    <span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">"srcs"</span><span class="p">:</span> <span class="n">attr</span><span class="o">.</span><span class="n">label_list</span><span class="p">(</span><span class="n">allow_files</span> <span class="o">=</span> <span class="bp">True</span><span class="p">),</span>
        <span class="o">...</span>
        <span class="c1"># No `_compiler` attribute anymore.
</span>    <span class="p">},</span>
    <span class="n">toolchains</span> <span class="o">=</span> <span class="p">[</span><span class="s">"//bar_tools:toolchain_type"</span><span class="p">]</span>
<span class="p">)</span>
</code></pre></div></div>

<p>The implementation function now accesses this dependency under <code class="highlighter-rouge">ctx.toolchains</code>
instead of <code class="highlighter-rouge">ctx.attr</code>, using the toolchain type as the key.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">_bar_binary_impl</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">toolchains</span><span class="p">[</span><span class="s">"//bar_tools:toolchain_type"</span><span class="p">]</span><span class="o">.</span><span class="n">barcinfo</span>
    <span class="c1"># The rest is unchanged.
</span>    <span class="n">command</span> <span class="o">=</span> <span class="s">"</span><span class="si">%</span><span class="s">s -l </span><span class="si">%</span><span class="s">s </span><span class="si">%</span><span class="s">s"</span> <span class="o">%</span> <span class="p">(</span>
        <span class="n">info</span><span class="o">.</span><span class="n">compiler_path</span><span class="p">,</span>
        <span class="n">info</span><span class="o">.</span><span class="n">system_lib</span><span class="p">,</span>
        <span class="s">" "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">arch_flags</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="o">...</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">ctx.toolchains["//bar_tools:toolchain_type"]</code> returns the
<a href="skylark/lib/platform_common.html#ToolchainInfo"><code class="highlighter-rouge">ToolchainInfo</code> provider</a>
of whatever target Bazel resolved the toolchain dependency to. The fields of the
<code class="highlighter-rouge">ToolchainInfo</code> object are set by the underlying tool’s rule; in the next
section we’ll define this rule such that there is a <code class="highlighter-rouge">barcinfo</code> field that wraps
a <code class="highlighter-rouge">BarcInfo</code> object.</p>

<p>Bazel’s procedure for resolving toolchains to targets is described
<a href="#toolchain-resolution">below</a>. Only the resolved toolchain target is actually
made a dependency of the <code class="highlighter-rouge">bar_binary</code> target, not the whole space of candidate
toolchains.</p>

<h2 id="defining-toolchains">Defining toolchains</h2>

<p>To define some toolchains for a given toolchain type, we need three things:</p>

<ol>
  <li>
    <p>A language-specific rule representing the kind of tool or tool suite. By
convention this rule’s name is suffixed with “_toolchain”.</p>
  </li>
  <li>
    <p>Several targets of this rule type, representing versions of the tool or tool
suite for different platforms.</p>
  </li>
  <li>
    <p>For each such target, an associated target of the generic
<a href="be/platform.html#toolchain"><code class="highlighter-rouge">toolchain</code></a>
rule, to provide metadata used by the toolchain framework.</p>
  </li>
</ol>

<p>For our running example, here’s a definition for a <code class="highlighter-rouge">bar_toolchain</code> rule. Our
example has only a compiler, but other tools such as a linker could also be
grouped underneath it.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">_bar_toolchain_impl</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>
    <span class="n">toolchain_info</span> <span class="o">=</span> <span class="n">platform_common</span><span class="o">.</span><span class="n">ToolchainInfo</span><span class="p">(</span>
        <span class="n">barcinfo</span> <span class="o">=</span> <span class="n">BarcInfo</span><span class="p">(</span>
            <span class="n">compiler_path</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">attr</span><span class="o">.</span><span class="n">compiler_path</span><span class="p">,</span>
            <span class="n">system_lib</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">attr</span><span class="o">.</span><span class="n">system_lib</span><span class="p">,</span>
            <span class="n">arch_flags</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">attr</span><span class="o">.</span><span class="n">arch_flags</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">toolchain_info</span><span class="p">]</span>

<span class="n">bar_toolchain</span> <span class="o">=</span> <span class="n">rule</span><span class="p">(</span>
    <span class="n">implementation</span> <span class="o">=</span> <span class="n">_bar_toolchain_impl</span><span class="p">,</span>
    <span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">"compiler_path"</span><span class="p">:</span> <span class="n">attr</span><span class="o">.</span><span class="n">string</span><span class="p">(),</span>
        <span class="s">"system_lib"</span><span class="p">:</span> <span class="n">attr</span><span class="o">.</span><span class="n">string</span><span class="p">(),</span>
        <span class="s">"arch_flags"</span><span class="p">:</span> <span class="n">attr</span><span class="o">.</span><span class="n">string_list</span><span class="p">(),</span>
    <span class="p">},</span>
<span class="p">)</span>
</code></pre></div></div>

<p>The rule must return a <code class="highlighter-rouge">ToolchainInfo</code> provider, which becomes the object that
the consuming rule retrieves using <code class="highlighter-rouge">ctx.toolchains</code> and the label of the
toolchain type. <code class="highlighter-rouge">ToolchainInfo</code>, like <code class="highlighter-rouge">struct</code>, can hold arbitrary field-value
pairs. The specification of exactly what fields are added to the <code class="highlighter-rouge">ToolchainInfo</code>
should be clearly documented at the toolchain type. Here we have returned the
values wrapped in a <code class="highlighter-rouge">BarcInfo</code> object in order to reuse the schema defined
above; this style may be useful for validation and code reuse.</p>

<p>Now we can define targets for specific <code class="highlighter-rouge">barc</code> compilers.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">bar_toolchain</span><span class="p">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s">"barc_linux"</span><span class="p">,</span>
    <span class="n">arch_flags</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">"--arch=Linux"</span><span class="p">,</span>
        <span class="s">"--debug_everything"</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">compiler_path</span> <span class="o">=</span> <span class="s">"/path/to/barc/on/linux"</span><span class="p">,</span>
    <span class="n">system_lib</span> <span class="o">=</span> <span class="s">"/usr/lib/libbarc.so"</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">bar_toolchain</span><span class="p">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s">"barc_windows"</span><span class="p">,</span>
    <span class="n">arch_flags</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">"--arch=Windows"</span><span class="p">,</span>
        <span class="c1"># Different flags, no debug support on windows.
</span>    <span class="p">],</span>
    <span class="n">compiler_path</span> <span class="o">=</span> <span class="s">"C:</span><span class="se">\\</span><span class="s">path</span><span class="se">\\</span><span class="s">on</span><span class="se">\\</span><span class="s">windows</span><span class="se">\\</span><span class="s">barc.exe"</span><span class="p">,</span>
    <span class="n">system_lib</span> <span class="o">=</span> <span class="s">"C:</span><span class="se">\\</span><span class="s">path</span><span class="se">\\</span><span class="s">on</span><span class="se">\\</span><span class="s">windows</span><span class="se">\\</span><span class="s">barclib.dll"</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div></div>

<p>Finally, we create <code class="highlighter-rouge">toolchain</code> definitions for the two <code class="highlighter-rouge">bar_toolchain</code> targets.
These definitions link the language-specific targets to the toolchain type and
provide the constraint information that tells Bazel when the toolchain is
appropriate for a given platform.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">toolchain</span><span class="p">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s">"barc_linux_toolchain"</span><span class="p">,</span>
    <span class="n">exec_compatible_with</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">"@platforms//os:linux"</span><span class="p">,</span>
        <span class="s">"@platforms//cpu:x86_64"</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">target_compatible_with</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">"@platforms//os:linux"</span><span class="p">,</span>
        <span class="s">"@platforms//cpu:x86_64"</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">toolchain</span> <span class="o">=</span> <span class="s">":barc_linux"</span><span class="p">,</span>
    <span class="n">toolchain_type</span> <span class="o">=</span> <span class="s">":toolchain_type"</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">toolchain</span><span class="p">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s">"barc_windows_toolchain"</span><span class="p">,</span>
    <span class="n">exec_compatible_with</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">"@platforms//os:windows"</span><span class="p">,</span>
        <span class="s">"@platforms//cpu:x86_64"</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">target_compatible_with</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">"@platforms//os:windows"</span><span class="p">,</span>
        <span class="s">"@platforms//cpu:x86_64"</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">toolchain</span> <span class="o">=</span> <span class="s">":barc_windows"</span><span class="p">,</span>
    <span class="n">toolchain_type</span> <span class="o">=</span> <span class="s">":toolchain_type"</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div></div>

<p>The use of relative path syntax above suggests these definitions are all in the
same package, but there’s no reason the toolchain type, language-specific
toolchain targets, and <code class="highlighter-rouge">toolchain</code> definition targets can’t all be in separate
packages.</p>

<p>See the <a href="https://github.com/bazelbuild/rules_go/blob/master/go/private/go_toolchain.bzl"><code class="highlighter-rouge">go_toolchain</code></a>
for a real-world example.</p>

<h2 id="registering-and-building-with-toolchains">Registering and building with toolchains</h2>

<p>At this point all the building blocks are assembled, and we just need to make
the toolchains available to Bazel’s resolution procedure. This is done by
registering the toolchain, either in a <code class="highlighter-rouge">WORKSPACE</code> file using
<code class="highlighter-rouge">register_toolchains()</code>, or by passing the toolchains’ labels on the command
line using the <code class="highlighter-rouge">--extra_toolchains</code> flag.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">register_toolchains</span><span class="p">(</span>
    <span class="s">"//bar_tools:barc_linux_toolchain"</span><span class="p">,</span>
    <span class="s">"//bar_tools:barc_windows_toolchain"</span><span class="p">,</span>
    <span class="c1"># Target patterns are also permitted, so we could have also written:
</span>    <span class="c1"># "//bar_tools:all",
</span><span class="p">)</span>
</code></pre></div></div>

<p>Now when you build a target that depends on a toolchain type, an appropriate
toolchain will be selected based on the target and execution platforms.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># my_pkg/BUILD
</span>
<span class="n">platform</span><span class="p">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s">"my_target_platform"</span><span class="p">,</span>
    <span class="n">constraint_values</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">"@platforms//os:linux"</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">)</span>

<span class="n">bar_binary</span><span class="p">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s">"my_bar_binary"</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">)</span>
</code></pre></div></div>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bazel build //my_pkg:my_bar_binary <span class="nt">--platforms</span><span class="o">=</span>//my_pkg:my_target_platform
</code></pre></div></div>

<p>Bazel will see that <code class="highlighter-rouge">//my_pkg:my_bar_binary</code> is being built with a platform that
has <code class="highlighter-rouge">@platforms//os:linux</code> and therefore resolve the
<code class="highlighter-rouge">//bar_tools:toolchain_type</code> reference to <code class="highlighter-rouge">//bar_tools:barc_linux_toolchain</code>.
This will end up building <code class="highlighter-rouge">//bar_tools:barc_linux</code> but not
<code class="highlighter-rouge">//barc_tools:barc_windows</code>.</p>

<h2 id="toolchain-resolution">Toolchain Resolution</h2>

<p><strong>Note:</strong> <a href="platforms-intro.html#status">Some Bazel rules</a> do not yet support
toolchain resolution.</p>

<p>For each target that uses toolchains, Bazel’s toolchain resolution procedure
determines the target’s concrete toolchain dependencies. The procedure takes as input a
set of required toolchain types, the target platform, the list of available
execution platforms, and the list of available toolchains. Its outputs are a
selected toolchain for each toolchain type as well as a selected execution
platform for the current target.</p>

<p>The available execution platforms and toolchains are gathered from the
<code class="highlighter-rouge">WORKSPACE</code> file via
<a href="skylark/lib/globals.html#register_execution_platforms"><code class="highlighter-rouge">register_execution_platforms</code></a>
and
<a href="skylark/lib/globals.html#register_toolchains"><code class="highlighter-rouge">register_toolchains</code></a>.
Additional execution platforms and toolchains may also be specified on the
command line via
<a href="command-line-reference.html#flag--extra_execution_platforms"><code class="highlighter-rouge">--extra_execution_platforms</code></a>
and
<a href="command-line-reference.html#flag--extra_toolchains"><code class="highlighter-rouge">--extra_toolchains</code></a>.
The host platform is automatically included as an available execution platform.
Available platforms and toolchains are tracked as ordered lists for determinism,
with preference given to earlier items in the list.</p>

<p>The resolution steps are as follows.</p>

<ol>
  <li>
    <p>A <code class="highlighter-rouge">target_compatible_with</code> or <code class="highlighter-rouge">exec_compatible_with</code> clause <em>matches</em> a
platform iff, for each <code class="highlighter-rouge">constraint_value</code> in its list, the platform also has
that <code class="highlighter-rouge">contraint_value</code> (either explicitly or as a default).</p>

    <p>If the platform has <code class="highlighter-rouge">constraint_value</code>s from <code class="highlighter-rouge">constraint_setting</code>s not
referenced by the clause, these do not affect matching.</p>
  </li>
  <li>
    <p>If the target being built specifies the
<a href="be/common-definitions.html#common.exec_compatible_with"><code class="highlighter-rouge">exec_compatible_with</code> attribute</a>
(or its rule definition specifies the
<a href="skylark/lib/globals.html#rule.exec_compatible_with"><code class="highlighter-rouge">exec_compatible_with</code> argument</a>),
the list of available execution platforms is filtered to remove
any that do not match the execution constraints.</p>
  </li>
  <li>
    <p>For each available execution platform, we associate each toolchain type with
the first available toolchain, if any, that is compatible with this execution
platform and the target platform.</p>
  </li>
  <li>
    <p>Any execution platform that failed to find a compatible toolchain for one of
its toolchain types is ruled out. Of the remaining platforms, the first one
becomes the current target’s execution platform, and its associated
toolchains become dependencies of the target.</p>
  </li>
</ol>

<p>The chosen execution platform is used to run all actions that the target
generates.</p>

<p>In cases where the same target can be built in multiple configurations (such as
for different CPUs) within the same build, the resolution procedure is applied
independently to each version of the target.</p>

<h2 id="debugging-toolchains">Debugging toolchains</h2>

<p>When adding toolchain support to an existing rule, use the
<code class="highlighter-rouge">--toolchain_resolution_debug</code> flag to make toolchain resolution verbose. Bazel
will output names of toolchains it is checking and skipping during the
resolution process.</p>

        </div>

        <div class="col-md-2 sticky-sidebar">
            <div class="right-sidebar">
                <ul class="gh-links">
                    <li><a href="https://github.com/bazelbuild/bazel/issues/new?title=Documentation issue: Toolchains&body=Documentation URL: https://docs.bazel.build/versions/master/toolchains.html&labels=type: documentation"><i class="fa fa-github"></i> Create issue for this page</a></li>
                    <li id="gh-edit-list-item" class="default-hidden" aria-hidden="true"><a id="gh-edit" class="gh-edit default-hidden"><i class="fa fa-pencil" aria-hidden="true"></i> Edit this page</a></li>
                </ul>
                <script>
                 var versionDocsURLRegex = /\/versions\/[\w\.]+\/(.*)/;
                 var ghDocsBazeURL = 'https://github.com/bazelbuild/bazel/tree/master/site/docs/';
                 var editButton = document.getElementById('gh-edit');
                 var editButtonListItem = document.getElementById('gh-edit-list-item');
                 // if there is an edit button and we are not in the Build Encyclopedia
                 // or other generated files.
                 if (editButton
                     && window.location.pathname.match(versionDocsURLRegex)
                     && window.location.pathname.lastIndexOf('/be/') == -1
                     && window.location.pathname.lastIndexOf('/repo/') == -1
                     && window.location.pathname.lastIndexOf('/skylark/lib/') == -1) {
                     var docFile = window.location.pathname.match(versionDocsURLRegex)[1];
                     // some pages are not using markdown :(
                     if (docFile !== 'user-manual.html'
                         && docFile !== 'build-ref.html'
                         && docFile !== 'query.html'
                         && docFile !== 'test-encyclopedia.html') {
                         docFile = docFile.replace('html', 'md');
                     }
                     editButton.href = ghDocsBazeURL + docFile;
                     editButton.style.visibility = 'visible'
                     editButtonListItem.style.visibility = 'visible'
                 }
                </script>

                <ul class="page-toc">
<li class="toc-entry toc-h2"><a href="#overview">Overview</a></li>
<li class="toc-entry toc-h2"><a href="#motivation">Motivation</a></li>
<li class="toc-entry toc-h2"><a href="#writing-rules-that-use-toolchains">Writing rules that use toolchains</a></li>
<li class="toc-entry toc-h2"><a href="#defining-toolchains">Defining toolchains</a></li>
<li class="toc-entry toc-h2"><a href="#registering-and-building-with-toolchains">Registering and building with toolchains</a></li>
<li class="toc-entry toc-h2"><a href="#toolchain-resolution">Toolchain Resolution</a></li>
<li class="toc-entry toc-h2"><a href="#debugging-toolchains">Debugging toolchains</a></li>
</ul>
            </div>
        </div>
      </div>
    </div>

    <!-- Satisfaction Survey -->
    <script async="" defer="" src="//www.google.com/insights/consumersurveys/async_survey?site=hihwpyy5e5kllsq62elzjrcgn4"></script>

        <footer class="footer">
      <div class="container">
  <div class="row">
    <div class="col-sm-4 col-md-2">
      <p>About</p>
      <ul class="list-unstyled">
        <li><a href="https://github.com/bazelbuild/bazel/wiki/Bazel-Users">Who's Using Bazel?</a></li>
        <li><a href="https://www.bazel.build/roadmap.html">Roadmap</a></li>
        <li><a href="https://www.bazel.build/contributing.html">Contribute</a></li>
        <li><a href="https://www.bazel.build/governance.html">Governance Plan</a></li>
        <li><a href="https://policies.google.com/privacy">Privacy Policy</a></li>
      </ul>
    </div>
    <div class="col-sm-4 col-md-2">
      <p>Support</p>
      <ul class="list-unstyled">
        <li><a href="http://stackoverflow.com/questions/tagged/bazel">Stack Overflow</a></li>
        <li><a href="https://github.com/bazelbuild/bazel/issues">Issue Tracker</a></li>
        <li><a href="/">Documentation</a></li>
        <li><a href="https://www.bazel.build/faq.html">FAQ</a></li>
        <li><a href="https://www.bazel.build/support.html">Support Policy</a></li>
      </ul>
    </div>
    <div class="col-sm-4 col-md-2">
      <p>Stay Connected</p>
      <ul class="list-unstyled">
        <li><a href="https://twitter.com/bazelbuild">Twitter</a></li>
        <li><a href="https://blog.bazel.build">Blog</a></li>
        <li><a href="https://github.com/bazelbuild/bazel">GitHub</a></li>
        <li><a href="https://groups.google.com/forum/#!forum/bazel-discuss">Discussion group</a></li>
      </ul>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12">
      <p class="text-muted">&copy; 2020 Google</p>
    </div>
  </div>
</div>

    </footer>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/assets/js/bootstrap.min.js"></script>

    <!-- Anchor JS -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.2.0/anchor.min.js"></script>
    <script>
      // Automatically add anchors and links to all header elements that don't already have them.
      anchors.add();
    </script>

    <script>
      var shiftWindow = function() {
        if (location.hash.length !== 0) {
          window.scrollBy(0, -50);
        }
      };
      window.addEventListener("hashchange", shiftWindow);

      var highlightCurrentSidebarNav = function() {
        var href = location.pathname;
        var item = $('#sidebar-nav [href$="' + href + '"]');
        if (item) {
          var li = item.parent();
          li.addClass("active");

          if (li.parent() && li.parent().is("ul")) {
            do {
              var ul = li.parent();
              if (ul.hasClass("collapse")) {
                ul.collapse("show");
              }
              li = ul.parent();
            } while (li && li.is("li"));
          }
        }
      };

      $(document).ready(function() {
        // Scroll to anchor of location hash, adjusted for fixed navbar.
        window.setTimeout(function() {
          shiftWindow();
        }, 1);

        // Flip the caret when submenu toggles are clicked.
        $(".sidebar-submenu").on("show.bs.collapse", function() {
          var toggle = $('[href$="#' + $(this).attr('id') + '"]');
          if (toggle) {
            toggle.addClass("dropup");
          }
        });
        $(".sidebar-submenu").on("hide.bs.collapse", function() {
          var toggle = $('[href$="#' + $(this).attr('id') + '"]');
          if (toggle) {
            toggle.removeClass("dropup");
          }
        });

        // Highlight the current page on the sidebar nav.
        highlightCurrentSidebarNav();
      });
    </script>

    <!-- Google Analytics tracking code -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-61082125-1', 'auto');
      ga('send', 'pageview');
    </script>

  </body>
</html>

