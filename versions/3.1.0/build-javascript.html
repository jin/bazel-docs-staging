<!-- /versions/master/foo/bar -> ["master", "foo", "bar"] -->
<!-- /versions/0.12.3/baz.md -> ["0.12.3", "baz.md"] -->





<!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/WebPage">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Only show Bazel version in title if it's a release -->
    <title>Building JavaScript Outputs - Bazel 3.1.0</title>

    <link rel="canonical" href="/versions/3.1.0/build-javascript.html">

    <!-- Webfont -->
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro:400,500,700|Open+Sans:400,600,700,800" rel="stylesheet">

    <link rel="shortcut icon" type="image/png" href="/images/favicon.ico">

    <!-- Bootstrap -->
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/css/font-awesome.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom stylesheet -->
    <link rel="stylesheet" type="text/css" href="/css/main.css" />

    <!-- metadata -->
    <meta name="og:title" content="Building JavaScript Outputs"/>
    <meta name="og:image" content="/images/bazel-og-image.png"/>

    <!-- google search console verification -->
    <meta name="google-site-verification" content="ftWLOiP2hnDW4Cw3LUGEaXU83RVIpiyxwaXFFhoakzs" />
  </head>

  <body>
        <nav id="common-nav" class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://www.bazel.build/">
            <img class="navbar-logo" src="/images/bazel-navbar.svg">
          </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://github.com/bazelbuild/bazel">GitHub</a></li>
          </ul>
          <form class="navbar-form navbar-right" action="/search.html" id="cse-search-box">
            <div class="form-group">
              <input type="hidden" name="cx" value="009927877080525621790:2pxlpaexqpc">
              <input type="hidden" name="cof" value="FORID:10">
              <input type="hidden" name="ie" value="UTF-8">
              <input type="search" name="q" id="q" class="form-control input-sm" placeholder="Search">
            </div>
          </form>
          <ul class="nav navbar-nav navbar-right">
            <li>
              <a href="/">Documentation</a>
            </li>
            <li>
              <a href="https://www.bazel.build/contributing.html">Contribute</a>
            </li>
            <li>
              <a href="https://blog.bazel.build">Blog</a>
            </li>
            <li><a href="https://twitter.com/bazelbuild" class="nav-icon"><i class="fa fa-twitter"></i></a></li>
            <li><a href="http://stackoverflow.com/questions/tagged/bazel" class="nav-icon"><i class="fa fa-stack-overflow"></i></a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>


    <div class="container vpad">
      <div class="row">
        <div class="col-md-2">
          <a class="btn btn-default btn-lg btn-block sidebar-toggle"
              data-toggle="collapse" href="#sidebar-nav" aria-expanded="false"
              aria-controls="sidebar-nav">
            <i class="glyphicon glyphicon-menu-hamburger"></i> Navigation
          </a>

          <nav class="sidebar collapse" id="sidebar-nav">
            <select onchange="location.href=this.value">
                <option value="" selected disabled hidden>Version: 3.1.0</option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/master/build-javascript.html">
                    master
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/3.2.0/build-javascript.html">
                    3.2.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/3.1.0/build-javascript.html">
                    3.1.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/3.0.0/build-javascript.html">
                    3.0.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/2.2.0/build-javascript.html">
                    2.2.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/2.1.0/build-javascript.html">
                    2.1.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/2.0.0/build-javascript.html">
                    2.0.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/1.2.0/build-javascript.html">
                    1.2.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/1.1.0/build-javascript.html">
                    1.1.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/1.0.0/build-javascript.html">
                    1.0.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.29.1/build-javascript.html">
                    0.29.1
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.29.0/build-javascript.html">
                    0.29.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.28.0/build-javascript.html">
                    0.28.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.27.0/build-javascript.html">
                    0.27.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.26.0/build-javascript.html">
                    0.26.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.25.0/build-javascript.html">
                    0.25.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.24.0/build-javascript.html">
                    0.24.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.23.0/build-javascript.html">
                    0.23.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.22.0/build-javascript.html">
                    0.22.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.21.0/build-javascript.html">
                    0.21.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.20.0/build-javascript.html">
                    0.20.0
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.19.2/build-javascript.html">
                    0.19.2
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.19.1/build-javascript.html">
                    0.19.1
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.18.1/build-javascript.html">
                    0.18.1
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.17.2/build-javascript.html">
                    0.17.2
                </option>
                
                <!-- reconstruct absolute url for the current page for each doc version -->
                <option value="/versions/0.17.1/build-javascript.html">
                    0.17.1
                </option>
                
            </select>

            <h3>Home</h3>
            <ul class="sidebar-nav">
              <li><a href="/versions/3.1.0/bazel-overview.html">Bazel overview</a></li>
              <li><a href="/versions/3.1.0/bazel-vision.html">Bazel vision</a></li>
              <li><a href="/versions/3.1.0/getting-started.html">Getting started</a></li>
              <li><a href="/versions/3.1.0/backward-compatibility.html">Backward compatibility</a></li>
            </ul>

            <h3>Installing Bazel</h3>
            <ul class="sidebar-nav">

              <li class="sidebar-nav">
                <a href="/versions/3.1.0/install.html">Installation overview</a>
              </li>

              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#installing-menu" aria-expanded="false"
                    aria-controls="installing-menu">
                  Installation steps<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="installing-menu">

                   <li><a href="/versions/3.1.0/install-ubuntu.html">Ubuntu</a></li>
                   <li><a href="/versions/3.1.0/install-redhat.html">Fedora/CentOS</a></li>
                   <li><a href="/versions/3.1.0/install-os-x.html">macOS</a></li>
                   <li><a href="/versions/3.1.0/install-windows.html">Windows</a></li>
                   <li><a href="/versions/3.1.0/install-compile-source.html">Compiling from source</a></li>
                   <li><a href="/versions/3.1.0/completion.html">Command-line completion</a></li>
                   <li><a href="/versions/3.1.0/ide.html">Integrating with IDEs</a></li>
                </ul>
              </li>

              
              <li class="sidebar-nav">
                <a href="/versions/3.1.0/updating-bazel.html">Updating Bazel</a>
              </li>
              
            </ul>

            <h3>Tutorials</h3>
            <ul class="sidebar-nav">
                <li><a href="/versions/3.1.0/tutorial/cpp.html">C++</a></li>
                <li><a href="/versions/3.1.0/tutorial/java.html">Java</a></li>
                <li><a href="/versions/3.1.0/tutorial/android-app.html">Android</a></li>
                <li><a href="/versions/3.1.0/tutorial/ios-app.html">iOS</a></li>
            </ul>

            <h3>Using Bazel</h3>
            <ul class="sidebar-nav">
              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#using-menu" aria-expanded="false"
                    aria-controls="using-menu">
                  Concepts<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="using-menu">
                  <li><a href="/versions/3.1.0/build-ref.html">Core concepts</a></li>
                  <li><a href="/versions/3.1.0/external.html">External dependencies</a></li>
                  <li><a href="/versions/3.1.0/configurable-attributes.html">Configurable attributes</a></li>
                  <li><a href="/versions/master/platforms-intro.html">Platforms and toolchains</a></li>
                  <li><a href="/versions/master/visibility.html">Visibility</a></li>
                </ul>
              </li>

              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#guides-menu" aria-expanded="false"
                    aria-controls="build-files-menu">
                  Guides<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="guides-menu">
                  <li><a href="/versions/3.1.0/guide.html">Running Bazel</a></li>
                  <li><a href="/versions/3.1.0/skylark/tutorial-creating-a-macro.html">Creating a macro</a></li>
                  <li><a href="/versions/3.1.0/memory-saving-mode.html">Optimizing memory</a></li>
                  <li><a href="/versions/3.1.0/windows.html">Building on Windows</a></li>
                </ul>
              </li>

              
                <li><a href="/versions/3.1.0/rules.html">Rules</a></li>
              

              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#query-menu" aria-expanded="false"
                    aria-controls="query-menu">
                  Queries<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="query-menu">
                  <li><a href="/versions/3.1.0/query-how-to.html">The query command</a></li>
                  <li><a href="/versions/3.1.0/cquery.html">The cquery command</a></li>
                  <li><a href="/versions/3.1.0/aquery.html">The aquery command</a></li>
                  <li><a href="/versions/3.1.0/query.html">Query language</a></li>
                </ul>
              </li>

              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#best-practices-menu" aria-expanded="false"
                    aria-controls="best-practices-menu">
                  Best practices<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="best-practices-menu">
                  <li><a href="/versions/3.1.0/best-practices.html">General best practices</a></li>
                  <li><a href="/versions/3.1.0/skylark/tutorial-sharing-variables.html">Sharing BUILD variables</a></li>
                </ul>
              </li>

              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#remote-execution-menu" aria-expanded="false"
                    aria-controls="remote-execution-menu">
                  Remote execution<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="remote-execution-menu">
                   <li><a href="/versions/3.1.0/remote-execution.html">Overview</a></li>
                   <li><a href="/versions/3.1.0/remote-execution-rules.html">Guidelines</a></li>
                   <li>
                      <a class="sidebar-nav-heading" data-toggle="collapse"
                          href="#troubleshoot-remote-execution-menu" aria-expanded="false"
                          aria-controls="troubleshoot-remote-execution-menu">
                        Troubleshooting<span class="caret"></span>
                      </a>
                      <ul class="collapse sidebar-nav sidebar-submenu" id="troubleshoot-remote-execution-menu">
                         <li><a href="/versions/3.1.0/remote-execution-sandbox.html">Troubleshooting with Bazel sandbox</a></li>
                         <li><a href="/versions/3.1.0/workspace-log.html">Non-hermetic WORKSPACE rules</a></li>
                         <li><a href="/versions/3.1.0/remote-execution-caching-debug.html">Debugging remote cache hits</a></li>
                      </ul>
                  </li>
                   <li><a href="/versions/3.1.0/remote-execution-ci.html">Remote execution and CI</a></li>
                 </ul>
              </li>

              <li>
                  <a class="sidebar-nav-heading" data-toggle="collapse"
                      href="#remote-caching-menu" aria-expanded="false"
                      aria-controls="remote-caching-menu">
                    Remote caching<span class="caret"></span>
                  </a>
                  <ul class="collapse sidebar-nav sidebar-submenu" id="remote-caching-menu">
                     <li><a href="/versions/3.1.0/remote-caching.html">Overview</a></li>
                     <li><a href="/versions/3.1.0/remote-caching-debug.html">Debugging remote cache hits with local execution</a></li>
                  </ul>
              </li>
              
             </ul>

           

           <h3>Reference</h3>
           <ul class="sidebar-nav">
             <li><a href="/versions/3.1.0/user-manual.html">Commands and options</a></li>
             <li><a href="/versions/3.1.0/glossary.html">Glossary</a></li>
             <li><a href="/versions/3.1.0/be/overview.html">Build encyclopedia</a></li>
             <li><a href="/versions/3.1.0/test-encyclopedia.html">Test encyclopedia</a></li>
             <li><a href="/versions/3.1.0/command-line-reference.html">Command line reference</a></li>

             <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#build-files-menu" aria-expanded="false"
                    aria-controls="build-files-menu">
                  BUILD files<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="build-files-menu">
                  <li><a href="/versions/3.1.0/be/functions.html">Functions</a></li>
                  <li><a href="/versions/3.1.0/be/common-definitions.html">Common rule definitions</a></li>
                  <li><a href="/versions/3.1.0/be/make-variables.html">"Make" variables</a></li>
                  <li><a href="/versions/3.1.0/skylark/build-style.html">BUILD style guide</a></li>
                </ul>
             </li>

             <li><a href="/versions/3.1.0/build-event-protocol.html">Build Event Protocol</a></li>
             <li><a href="/versions/3.1.0/output_directories.html">Output directory layout</a></li>
             <li><a href="/versions/3.1.0/platforms.html">Platforms</a></li>
             <li><a href="/versions/3.1.0/toolchains.html">Toolchains</a></li>
           </ul>

           <h3>Extending Bazel</h3>
           <ul class="sidebar-nav">
              <li><a href="/versions/3.1.0/skylark/concepts.html">Extension overview</a></li>

              <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                    href="#starlark-concepts" aria-expanded="false"
                    aria-controls="starlark-concepts">
                  Concepts<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="starlark-concepts">
                  <li><a href="/versions/3.1.0/skylark/macros.html">Macros</a></li>
                  <li><a href="/versions/3.1.0/skylark/rules.html">Rules</a></li>
                  <li><a href="/versions/3.1.0/skylark/depsets.html">Depsets</a></li>
                  <li><a href="/versions/3.1.0/skylark/aspects.html">Aspects</a></li>
                  <li><a href="/versions/3.1.0/skylark/repository_rules.html">Repository rules</a></li>
                  <li><a href="/versions/3.1.0/skylark/config.html">Configurations</a></li>
                </ul>
              </li>

	            <li>
                <a class="sidebar-nav-heading" data-toggle="collapse"
                   href="#starlark-practices" aria-expanded="false"
                   aria-controls="starlark-practices">
                  Best practices<span class="caret"></span>
                </a>
                <ul class="collapse sidebar-nav sidebar-submenu" id="starlark-practices">
                  <li><a href="/versions/3.1.0/skylark/bzl-style.html">.bzl style guide</a></li>
                  <li><a href="/versions/3.1.0/skylark/testing.html">Testing extensions</a></li>
                  <li><a href="https://github.com/bazelbuild/stardoc">Documenting rules with Stardoc</a></li>
                  <li><a href="https://github.com/bazelbuild/buildtools/tree/master/buildifier">Linting</a></li>
                  <li><a href="/versions/3.1.0/skylark/performance.html">Optimizing performance</a></li>
                  <li><a href="/versions/3.1.0/skylark/deploying.html">Deploying rules</a></li>
                  <li><a href="/versions/3.1.0/skylark/windows_tips.html">Writing rules on Windows</a></li>
                </ul>
              </li>

              <li><a href="https://github.com/bazelbuild/examples/tree/master/rules">Examples</a></li>
              <li><a href="/versions/3.1.0/skylark/lib/skylark-overview.html">Extensions API</a></li>
              <li><a href="/versions/3.1.0/skylark/faq.html">FAQ</a></li>
              <li><a href="/versions/3.1.0/skylark/language.html">Starlark language</a></li>
            </ul>
          </nav>
        </div>

        <div class="col-md-8">
          <div class="content">
            <h1 id="building-javascript-outputs">Building JavaScript Outputs</h1>

<p>Bazel supports an incremental and customizable means of building and testing
JavaScript outputs from JavaScript and TypeScript sources.</p>

<p>It can also support build steps needed for frameworks like Angular.</p>

<p><strong>Note:</strong> This document describes Bazel features and workflows that are useful,
but the Bazel team has not fully verified and does not officially support
these features and workflows.</p>

<h2 id="contents">Contents</h2>

<ul>
  <li><a href="#overview">Overview</a></li>
  <li><a href="#setting-up-your-environment">Setting up your environment</a>
    <ul>
      <li><a href="#step-1-installing-bazel">Step 1: Installing Bazel</a></li>
      <li><a href="#step-2-installing-ibazel">Step 2: Installing iBazel</a></li>
      <li><a href="#step-3-configuring-the-bazel-rc-file">Step 3: Configuring the <code class="highlighter-rouge">bazel.rc</code> file</a></li>
      <li><a href="#step-4-linting">Step 4: Setup linting (optional)</a></li>
    </ul>
  </li>
  <li><a href="#building-javascript">Building JavaScript inputs</a></li>
  <li><a href="#building-typescript">Building TypeScript inputs</a>
    <ul>
      <li><a href="#compiling-typescript-inputs-ts_library">Compiling TypeScript inputs (<code class="highlighter-rouge">ts_library</code>)</a></li>
      <li><a href="#running-a-development-server-ts_devserver">Running a development server (<code class="highlighter-rouge">ts_devserver</code>)</a></li>
      <li><a href="#testing-typescript-code-ts_web_test">Testing TypeScript code (<code class="highlighter-rouge">ts_web_test</code>)</a></li>
    </ul>
  </li>
  <li><a href="#building-angular-inputs">Building Angular inputs</a></li>
</ul>

<h2 id="overview">Overview</h2>

<p>Bazel rules for building JavaScript outputs are split into three layers, since
you can use JavaScript without TypeScript, and TypeScript without Angular.
This document assumes you are already familiar with Bazel and uses the
<a href="https://github.com/angular/angular-bazel-example">Angular for Bazel sample project</a>
to illustrate the recommended configuration. You can use the sample project as a
starting point and add your own code to it to start building with Bazel.</p>

<p>If you’re new to Bazel, take a look at the <a href="getting-started.html">“Getting
Started”</a> material before proceeding.</p>

<h2 id="setting-up-your-environment">Setting up your environment</h2>

<p>To set up your environment for building JavaScript outputs with Bazel, do the
following:</p>

<h3 id="step-1-installing-bazel">Step 1: Installing Bazel</h3>

<p>You can either <a href="install.html">Install Bazel</a> following the same steps that you
would for backend development, or you can install NodeJS with npm and run
<code class="highlighter-rouge">npm install -g @bazel/bazel</code>.</p>

<h3 id="step-2-installing-ibazel">Step 2: Installing iBazel</h3>

<p>iBazel, or iterative Bazel, is a “watchdog” version of Bazel that automatically
runs whenever your source files change. Use it to auto-run your tests and
auto-refresh the code served by the development server.</p>

<p><a href="https://github.com/bazelbuild/bazel-watcher">Install iBazel</a> globally using
your package manager of choice. The global installation is required so that
iBazel is in your PATH variable. Also install a specific version of iBazel into
your project so that your whole team updates together. For example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install --save-dev @bazel/ibazel
npm install --global @bazel/ibazel
</code></pre></div></div>
<p>or</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yarn add -D @bazel/ibazel
yarn global add @bazel/ibazel
</code></pre></div></div>

<p>To use <code class="highlighter-rouge">ibazel</code>, simply replace <code class="highlighter-rouge">bazel</code> with <code class="highlighter-rouge">ibazel</code> in your Bazel commands.</p>

<h3 id="step-3-configuring-the-bazelrc-file">Step 3: Configuring the <code class="highlighter-rouge">bazel.rc</code> file</h3>

<p>Any Bazel build flag or option that can be placed on the command line can also
be set in the project’s <a href="https://docs.bazel.build/guide.html#bazelrc"><code class="highlighter-rouge">bazel.rc</code> file</a>
so that it is applied every time Bazel builds or tests the project.</p>

<p>Based on how you want to share Bazel settings across your project and team(s),
you can use any combination of the following techniques:</p>

<ul>
  <li>
    <p><strong>To use the same Bazel settings for the project</strong>, create a <code class="highlighter-rouge">tools/bazel.rc</code>
file at the root of the Bazel workspace. Adding it to the workspace will
check the file into version control and propagate it to others working on
the project as well as the CI system.</p>
  </li>
  <li>
    <p><strong>To personalize Bazel settings for the project but not share them,</strong>
create a <code class="highlighter-rouge">.bazel.rc</code> file at the root of the project and add the file to
your <code class="highlighter-rouge">.gitignore</code> list.</p>
  </li>
  <li>
    <p><strong>To personalize Bazel settings for all of your projects on your
local machine,</strong> create a <code class="highlighter-rouge">.bazel.rc</code> file in your home directory.</p>
  </li>
</ul>

<p>Here’s an example <code class="highlighter-rouge">tools/bazel.rc</code> file to share with your team. Modify this
template as needed.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>###############################
# Directory structure         #
###############################

# Artifacts are typically placed in a directory called "dist"
# Be aware that this setup will still create a bazel-out symlink in
# your project directory, which you must exclude from version control and your
# editor's search path.
build --symlink_prefix=dist/

###############################
# Output                      #
###############################

# A more useful default output mode for bazel query, which
# prints "ng_module rule //foo:bar" instead of just "//foo:bar".
query --output=label_kind

# By default, failing tests don't print any output, it's logged to a
# file instead.
test --test_output=errors

###############################
# Typescript / Angular / Sass #
###############################
# Make TypeScript and Angular compilation fast, by keeping a few
# copies of the compiler running as daemons, and cache SourceFile
# ASTs to reduce parse time.
build --strategy=TypeScriptCompile=worker --strategy=AngularTemplateCompile=worker

# Enable debugging tests with --config=debug
test:debug --test_arg=--node_options=--inspect-brk --test_output=streamed --test_strategy=exclusive --test_timeout=9999 --nocache_test_results
</code></pre></div></div>

<h3 id="step-4-linting">Step 4: Linting</h3>

<p>Add the <code class="highlighter-rouge">buildifier</code> dependency to your project:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">--save-dev</span> @bazel/buildifier
</code></pre></div></div>

<p>or if you prefer Yarn,</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yarn add <span class="nt">-D</span> @bazel/buildifier
</code></pre></div></div>

<p>then add scripts to your <code class="highlighter-rouge">package.json</code> that run Buildifier.
We’ve selected a set of enabled warnings here, you could add and remove from
this list.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"bazel:format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"find . -type f </span><span class="se">\\</span><span class="s2">( -name </span><span class="se">\"</span><span class="s2">*.bzl</span><span class="se">\"</span><span class="s2"> -or -name WORKSPACE -or -name BUILD -or -name BUILD.bazel </span><span class="se">\\</span><span class="s2">) ! -path </span><span class="se">\"</span><span class="s2">*/node_modules/*</span><span class="se">\"</span><span class="s2"> | xargs buildifier -v --warnings=attr-cfg,attr-license,attr-non-empty,attr-output-default,attr-single-file,constant-glob,ctx-actions,ctx-args,depset-iteration,depset-union,dict-concatenation,duplicated-name,filetype,git-repository,http-archive,integer-division,load,load-on-top,native-build,native-package,out-of-order-load,output-group,package-name,package-on-top,positional-args,redefined-variable,repository-name,same-origin-load,string-iteration,unsorted-dict-items,unused-variable"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bazel:lint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yarn bazel:format --lint=warn"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bazel:lint-fix"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yarn bazel:format --lint=fix"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<blockquote>
  <p>The Bazel team is aware that this configuration is not ergonomic. Follow https://github.com/bazelbuild/buildtools/issues/479</p>
</blockquote>

<blockquote>
  <p>Also the Buildifier tool is not available on Windows. Follow https://github.com/bazelbuild/buildtools/issues/375</p>
</blockquote>

<h2 id="building-javascript">Building JavaScript</h2>

<p>Use the <a href="https://github.com/bazelbuild/rules_nodejs"><code class="highlighter-rouge">rules_nodejs</code></a>
rules to build NodeJS applications and execute JavaScript code within Bazel. You
can execute JavaScript tools in the Bazel toolchain, binary programs, or tests.
The NodeJS rules add the NodeJS runtime to your Bazel project.</p>

<p>See the documentation on that site for setup steps and to configure targets.</p>

<h2 id="building-typescript">Building TypeScript</h2>

<p>See the https://www.npmjs.com/package/@bazel/typescript package.</p>

<h3 id="compiling-typescript-inputs-ts_library">Compiling TypeScript inputs (<code class="highlighter-rouge">ts_library</code>)</h3>

<p>The <code class="highlighter-rouge">ts_library</code> rule compiles one package of TypeScript code at a time. Each
library compiles independently using the <code class="highlighter-rouge">.d.ts</code> declaration files from its
dependencies. Thus, Bazel will only rebuild a package if the API the package
depends on changes.</p>

<p>The <code class="highlighter-rouge">ts_library </code>rule, by default, outputs a <code class="highlighter-rouge">.d.ts</code> file for each <code class="highlighter-rouge">.ts</code> source
file input into it, plus an ES5 (devmode) <code class="highlighter-rouge">.js</code> file to be used as inputs for
rule targets that depend on the current target, including transitively.</p>

<p><strong>Tip:</strong> You can try out the <code class="highlighter-rouge">ts_library</code> rule by running bazel build src in
the <a href="https://github.com/alexeagle/angular-bazel-example/wiki">sample project</a>.</p>

<p><strong>Note:</strong> We recommend standardizing your TypeScript settings into a single
<code class="highlighter-rouge">tsconfig.json</code> file or as few <code class="highlighter-rouge">tsconfig.json</code> files as possible.</p>

<p>Note the following:</p>

<ul>
  <li>
    <p>Bazel controls parts of the <code class="highlighter-rouge">tsconfig.json </code>file  that define locations of
input and output files, manage dependencies on typings, and produce
JavaScript output that’s readable by downstream tooling. Currently, this
format is unbundled UMD modules, wrapping noth named (non-anonymous) AMD
modules and <code class="highlighter-rouge">commonjs</code> modules.</p>
  </li>
  <li>
    <p>Bazel may introduce new requirements for your TypeScript code. For example,
Bazel uses the <code class="highlighter-rouge">-declarations</code> flag to produce <code class="highlighter-rouge">.d.ts</code> outputs required by
dependent rule targets; your code may require adjustment to not produce
errors when the <code class="highlighter-rouge">-declarations</code> flag is in use.</p>
  </li>
  <li>
    <p>If your TypeScript builds are slow, consider granularizing the affected rule
target(s) into smaller sub-targets and declaring dependencies between them
appropriately.</p>
  </li>
</ul>

<h3 id="running-a-development-server-ts_devserver">Running a development server (<code class="highlighter-rouge">ts_devserver</code>)</h3>

<p>The <code class="highlighter-rouge">ts_devserver</code> rule brings up a development server from your application
sources. It’s intended for use with the <code class="highlighter-rouge">ibazel run</code> command so that the server
picks up your code changes immediately. The rule injects a <code class="highlighter-rouge">livereload</code> script
into the browser, which causes the page to auto-refresh with the latest changes
at the completion of each build.</p>

<p><strong>Tip:</strong> You can test-drive the development server feature by running
<code class="highlighter-rouge">ibazel run src: devserver</code> on the <a href="https://github.com/alexeagle/angular-bazel-example/wiki">sample project</a>.</p>

<h3 id="testing-typescript-code-ts_web_test">Testing TypeScript code (<code class="highlighter-rouge">ts_web_test</code>)</h3>

<p>Use the <code class="highlighter-rouge">ts_web_test</code> rule to execute the Karma test runner. This rule works
best with ibazel so that both the test runner and the browser pick up your
changes at the completion of each build. For faster builds, Bazel bundles your
code and its dependencies into a single JavaScript file delivered to the browser
when the test runner executes.</p>

<p>If you need to match lots of tests with a target pattern such as bazel test //…
or using CI, run the <code class="highlighter-rouge">ts_web_test</code> rule with the regular <code class="highlighter-rouge">bazel test</code> command
instead. Bazel will then launch a headless Chrome instance and exit after a
single run.</p>

<p><strong>Tip:</strong> You can test-drive the <code class="highlighter-rouge">ts_web_test</code> rule by running <code class="highlighter-rouge">ibazel run</code> or
<code class="highlighter-rouge">bazel run</code> on the <code class="highlighter-rouge">src/hello-world:test</code> target in the <a href="https://github.com/alexeagle/angular-bazel-example/wiki">sample project</a>.</p>

<h2 id="building-angular-inputs">Building Angular inputs</h2>

<p>Bazel can build JavaScript outputs from Angular. For instructions, see <a href="https://github.com/alexeagle/angular-bazel-example/wiki/Angular-rules">Building Angular with Bazel</a>.</p>


          </div>
        </div>

        <div class="col-md-2 sticky-sidebar">
            <div class="right-sidebar">
                <ul class="gh-links">
                    <li><a href="https://github.com/bazelbuild/bazel/issues/new?title=Documentation issue: Building JavaScript Outputs&body=Documentation URL: https://docs.bazel.build/versions/3.1.0/build-javascript.html&labels=type: documentation"><i class="fa fa-github"></i> Create issue</a></li>
                    <li id="gh-edit-list-item" class="default-hidden" aria-hidden="true"><a id="gh-edit" class="gh-edit default-hidden"><i class="fa fa-pencil" aria-hidden="true"></i> Edit this page</a></li>
                </ul>
                <script>
                 var versionDocsURLRegex = /\/versions\/[\w\.]+\/(.*)/;
                 var ghDocsBazeURL = 'https://github.com/bazelbuild/bazel/tree/master/site/docs/';
                 var editButton = document.getElementById('gh-edit');
                 var editButtonListItem = document.getElementById('gh-edit-list-item');
                 // if there is an edit button and we are not in the Build Encyclopedia
                 // or other generated files.
                 if (editButton
                     && window.location.pathname.match(versionDocsURLRegex)
                     && window.location.pathname.lastIndexOf('/be/') == -1
                     && window.location.pathname.lastIndexOf('/repo/') == -1
                     && window.location.pathname.lastIndexOf('/skylark/lib/') == -1
                     && window.location.pathname.lastIndexOf('/command-line-reference.html') == -1) {
                     var docFile = window.location.pathname.match(versionDocsURLRegex)[1];
                     // some pages are not using markdown :(
                     if (docFile !== 'user-manual.html'
                         && docFile !== 'build-ref.html'
                         && docFile !== 'query.html'
                         && docFile !== 'test-encyclopedia.html') {
                         docFile = docFile.replace('html', 'md');
                     }
                     editButton.href = ghDocsBazeURL + docFile;
                     editButton.style.visibility = 'visible';
                     editButtonListItem.style.visibility = 'visible';
                 }
                </script>

                <ul class="page-toc">
<li class="toc-entry toc-h2"><a href="#contents">Contents</a></li>
<li class="toc-entry toc-h2"><a href="#overview">Overview</a></li>
<li class="toc-entry toc-h2"><a href="#setting-up-your-environment">Setting up your environment</a>
<ul class="page-toc-sublist">
<li class="toc-entry toc-h3"><a href="#step-1-installing-bazel">Step 1: Installing Bazel</a></li>
<li class="toc-entry toc-h3"><a href="#step-2-installing-ibazel">Step 2: Installing iBazel</a></li>
<li class="toc-entry toc-h3"><a href="#step-3-configuring-the-bazelrc-file">Step 3: Configuring the bazel.rc file</a></li>
<li class="toc-entry toc-h3"><a href="#step-4-linting">Step 4: Linting</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#building-javascript">Building JavaScript</a></li>
<li class="toc-entry toc-h2"><a href="#building-typescript">Building TypeScript</a>
<ul class="page-toc-sublist">
<li class="toc-entry toc-h3"><a href="#compiling-typescript-inputs-ts_library">Compiling TypeScript inputs (ts_library)</a></li>
<li class="toc-entry toc-h3"><a href="#running-a-development-server-ts_devserver">Running a development server (ts_devserver)</a></li>
<li class="toc-entry toc-h3"><a href="#testing-typescript-code-ts_web_test">Testing TypeScript code (ts_web_test)</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#building-angular-inputs">Building Angular inputs</a></li>
</ul>
            </div>
        </div>
      </div>
    </div>

    <!-- Satisfaction Survey -->
    <script async="" defer="" src="//www.google.com/insights/consumersurveys/async_survey?site=hihwpyy5e5kllsq62elzjrcgn4"></script>

        <footer class="footer">
      <div class="container">
  <div class="row">
    <div class="col-sm-4 col-md-2">
      <p>About</p>
      <ul class="list-unstyled">
        <li><a href="https://github.com/bazelbuild/bazel/wiki/Bazel-Users">Who's Using Bazel?</a></li>
        <li><a href="https://www.bazel.build/roadmap.html">Roadmap</a></li>
        <li><a href="https://www.bazel.build/contributing.html">Contribute</a></li>
        <li><a href="https://www.bazel.build/governance.html">Governance Plan</a></li>
        <li><a href="https://policies.google.com/privacy">Privacy Policy</a></li>
        <li><a href="//sitemap.xml">Sitemap</a></li>
      </ul>
    </div>
    <div class="col-sm-4 col-md-2">
      <p>Support</p>
      <ul class="list-unstyled">
        <li><a href="http://stackoverflow.com/questions/tagged/bazel">Stack Overflow</a></li>
        <li><a href="https://github.com/bazelbuild/bazel/issues">Issue Tracker</a></li>
        <li><a href="/">Documentation</a></li>
        <li><a href="https://www.bazel.build/faq.html">FAQ</a></li>
        <li><a href="https://www.bazel.build/support.html">Support Policy</a></li>
      </ul>
    </div>
    <div class="col-sm-4 col-md-2">
      <p>Stay Connected</p>
      <ul class="list-unstyled">
        <li><a href="https://twitter.com/bazelbuild">Twitter</a></li>
        <li><a href="https://blog.bazel.build">Blog</a></li>
        <li><a href="https://github.com/bazelbuild/bazel">GitHub</a></li>
        <li><a href="https://groups.google.com/forum/#!forum/bazel-discuss">Discussion group</a></li>
        <li><a href="https://slack.bazel.build">Slack</a></li>
      </ul>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12">
      <p class="text-muted">&copy; 2020 Google</p>
    </div>
  </div>
</div>

    </footer>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/assets/js/bootstrap.min.js"></script>

    <!-- Anchor JS -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.2.0/anchor.min.js"></script>
    <script>
      // Automatically add anchors and links to all header elements that don't already have them.
      anchors.add();
    </script>

    <script>
      var shiftWindow = function() {
        if (location.hash.length !== 0) {
          window.scrollBy(0, -50);
        }
      };
      window.addEventListener("hashchange", shiftWindow);

      var highlightCurrentSidebarNav = function() {
        var href = location.pathname;
        var item = $('#sidebar-nav [href$="' + href + '"]');
        if (item) {
          var li = item.parent();
          li.addClass("active");

          if (li.parent() && li.parent().is("ul")) {
            do {
              var ul = li.parent();
              if (ul.hasClass("collapse")) {
                ul.collapse("show");
              }
              li = ul.parent();
            } while (li && li.is("li"));
          }
        }
      };

      $(document).ready(function() {
        // Scroll to anchor of location hash, adjusted for fixed navbar.
        window.setTimeout(function() {
          shiftWindow();
        }, 1);

        // Flip the caret when submenu toggles are clicked.
        $(".sidebar-submenu").on("show.bs.collapse", function() {
          var toggle = $('[href$="#' + $(this).attr('id') + '"]');
          if (toggle) {
            toggle.addClass("dropup");
          }
        });
        $(".sidebar-submenu").on("hide.bs.collapse", function() {
          var toggle = $('[href$="#' + $(this).attr('id') + '"]');
          if (toggle) {
            toggle.removeClass("dropup");
          }
        });

        // Highlight the current page on the sidebar nav.
        highlightCurrentSidebarNav();
      });
    </script>

    <!-- Google Analytics tracking code -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-61082125-1', 'auto');
      ga('send', 'pageview');
    </script>

  </body>
</html>

